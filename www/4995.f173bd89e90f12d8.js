"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4995],{44995:(yt,Z,p)=>{p.r(Z),p.d(Z,{UpdatePayoutDetailsPageModule:()=>ct});var b=p(36895),h=p(24006),g=p(48058),v=p(64228),S=p(15861),y=p(22727),D=p(75024),t=p(98274),U=p(38940),B=p(30070),N=p(91903),I=p(11481),z=p(34598),F=p(30400),J=p(81905),q=p(31111),Y=p(53025),j=p(9999),E=p(78785),R=p(50441),C=p(54463),G=p(43485),H=p(12041);function V(o,d){1&o&&(t.TgZ(0,"section",9),t._UZ(1,"ion-spinner",10),t.qZA())}function Q(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.getPolicyList())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"generic_msgs.try_again")))}function K(o,d){if(1&o&&(t.TgZ(0,"section",11)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,Q,3,3,"ion-button",12),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMsg),t.xp6(1),t.Q6J("ngIf",e.canTryAgain)}}function $(o,d){1&o&&(t.TgZ(0,"div")(1,"span",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"update_payout_details.err_accountholdernameReq")))}function W(o,d){1&o&&(t.TgZ(0,"div")(1,"span",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"update_payout_details.err_accountholdernameLengthReq")))}function X(o,d){1&o&&(t.TgZ(0,"div")(1,"span",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"update_payout_details.err_account_holder_icReq")))}function tt(o,d){if(1&o&&(t.TgZ(0,"ion-select-option",40),t._uU(1),t.qZA()),2&o){const e=d.$implicit,i=d.index;t.Q6J("value",e.code)("selected",0===i),t.xp6(1),t.Oqu(e.name)}}function et(o,d){1&o&&(t.TgZ(0,"div")(1,"span",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"update_payout_details.err_bankAccountNumberReq")))}function it(o,d){1&o&&(t.TgZ(0,"div")(1,"span",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"update_payout_details.err_selectPlan")))}function nt(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",43)(2,"ion-label",48),t._uU(3),t.qZA()(),t.TgZ(4,"ion-col",43)(5,"ion-label",49),t._uU(6),t.qZA()(),t.TgZ(7,"ion-col",50)(8,"ion-checkbox",51),t.NdJ("ionChange",function(n){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.onChange(s.policyNumber,n))}),t.qZA()()()}if(2&o){const e=d.$implicit;t.xp6(3),t.Oqu(e.policyNumber),t.xp6(3),t.Oqu(e.planName)}}function st(o,d){if(1&o&&(t.TgZ(0,"div",41)(1,"ion-row",42)(2,"ion-col",43)(3,"ion-label",44),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"ion-col",43)(7,"ion-label",45),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t._UZ(10,"ion-col",46),t.qZA(),t.YNc(11,nt,9,2,"ion-row",47),t.qZA()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,3,"update_payout_details.policyNumber")),t.xp6(4),t.Oqu(t.lcZ(9,5,"update_payout_details.planName")),t.xp6(3),t.Q6J("ngForOf",e.policyList)}}const ot=function(){return{cssClass:"mycomponent-wider-popover"}};function at(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"div",14)(1,"form",15)(2,"p",16),t._uU(3),t.ALo(4,"translate"),t.TgZ(5,"span",17),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"ion-item",18),t._UZ(8,"ion-input",19),t.ALo(9,"translate"),t.qZA(),t.YNc(10,$,4,3,"div",20),t.YNc(11,W,4,3,"div",20),t.TgZ(12,"p",16),t._uU(13),t.ALo(14,"translate"),t.TgZ(15,"span",17),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"ion-item",18),t._UZ(18,"ion-input",21),t.ALo(19,"translate"),t.qZA(),t.YNc(20,X,4,3,"div",20),t.TgZ(21,"p",16),t._uU(22),t.ALo(23,"translate"),t.TgZ(24,"span",17),t._uU(25,"*"),t.qZA()(),t.TgZ(26,"div",18)(27,"ion-select",22),t.NdJ("ionChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.resetAccountNumberAndValidation(n))}),t.ALo(28,"translate"),t.YNc(29,tt,2,3,"ion-select-option",23),t.qZA()(),t.TgZ(30,"p",16),t._uU(31),t.ALo(32,"translate"),t.TgZ(33,"span",17),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"ion-item",18),t._UZ(36,"ion-input",24),t.ALo(37,"translate"),t.qZA(),t.YNc(38,et,4,3,"div",20),t.TgZ(39,"p",16),t._uU(40,"Upload documents"),t.TgZ(41,"span",17),t._uU(42,"*"),t.qZA()(),t.TgZ(43,"div",25)(44,"div",26)(45,"ion-col",27)(46,"ion-item",28),t._UZ(47,"ion-input",29),t.TgZ(48,"ion-icon",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.chooseCameraOptions("nricUpload"))}),t.qZA()()()(),t.TgZ(49,"div",31)(50,"ion-col",27)(51,"ion-item",28)(52,"ion-input",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.chooseCameraOptions("passbookUpload"))}),t.qZA(),t.TgZ(53,"ion-icon",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.chooseCameraOptions("passbookUpload"))}),t.qZA()()()()(),t.TgZ(54,"ion-label",33),t._uU(55),t.ALo(56,"translate"),t.TgZ(57,"span",17),t._uU(58,"*"),t.qZA()(),t.YNc(59,it,4,3,"div",20),t.YNc(60,st,12,7,"div",34),t.TgZ(61,"ion-row",35)(62,"ion-col")(63,"ion-button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updatePayoutDetails())}),t._uU(64),t.ALo(65,"translate"),t.qZA()()()(),t.TgZ(66,"ion-label",33),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"ul",37)(70,"li",38),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"li"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"li"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"li"),t._uU(80),t.ALo(81,"translate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.updatePayoutDetailForm),t.xp6(2),t.hij("",t.lcZ(4,26,"update_payout_details.accountholdername")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(9,28,"update_payout_details.accountholdername")),t.xp6(2),t.Q6J("ngIf",e.updatePayoutDetailForm.get("accountHolder").hasError("required")&&e.updatePayoutDetailForm.get("accountHolder").touched),t.xp6(1),t.Q6J("ngIf",e.updatePayoutDetailForm.get("accountHolder").hasError("minlength")&&e.updatePayoutDetailForm.get("accountHolder").touched),t.xp6(2),t.Oqu(t.lcZ(14,30,"update_payout_details.account_holder_ic")),t.xp6(5),t.s9C("placeholder",t.lcZ(19,32,"update_payout_details.account_holder_ic")),t.xp6(2),t.Q6J("ngIf",e.updatePayoutDetailForm.get("accountHolderIc").hasError("required")&&e.updatePayoutDetailForm.get("accountHolderIc").touched),t.xp6(2),t.Oqu(t.lcZ(23,34,"update_payout_details.bankbranch")),t.xp6(5),t.s9C("placeholder",t.lcZ(28,36,"update_card_details.selectBank")),t.Q6J("interfaceOptions",t.DdM(56,ot)),t.xp6(2),t.Q6J("ngForOf",e.BanksBranch),t.xp6(2),t.hij("",t.lcZ(32,38,"update_payout_details.bankAccountNumber")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(37,40,"update_payout_details.bankAccountNumber")),t.Q6J("ngModel",e.bankAccountNumberVal),t.xp6(2),t.Q6J("ngIf",e.updatePayoutDetailForm.get("bankAccountNumber").hasError("required")&&e.updatePayoutDetailForm.get("bankAccountNumber").touched),t.xp6(17),t.Oqu(t.lcZ(56,42,"update_payout_details.selectPlan")),t.xp6(4),t.Q6J("ngIf",e.updatePayoutDetailForm.get("policyNumber").length<=0&&e.updatePayoutDetailForm.valid),t.xp6(1),t.Q6J("ngIf",e.policyList.length>0),t.xp6(3),t.Q6J("disabled",!(e.updatePayoutDetailForm.valid&&!e.updatePayoutDetailForm.get("policyNumber").length<=0)),t.xp6(1),t.Oqu(t.lcZ(65,44,"update_payout_details.update")),t.xp6(3),t.hij(" ",t.lcZ(68,46,"update_payout_details.importantNote_txt_title")," "),t.xp6(4),t.Oqu(t.lcZ(72,48,"update_payout_details.importantNote_txt_line1")),t.xp6(3),t.Oqu(t.lcZ(75,50,"update_payout_details.importantNote_txt_line2")),t.xp6(3),t.Oqu(t.lcZ(78,52,"update_payout_details.importantNote_txt_line3")),t.xp6(3),t.Oqu(t.lcZ(81,54,"update_payout_details.importantNote_txt_line4"))}}const rt=[{path:"",component:(()=>{class o{constructor(e,i,n,r,s,l,u,c,a,_,O,A,f,pt,gt,dt,ut,ht,k,mt){this.docPicker=e,this.actionSheetCtrl=i,this.camera=n,this.base64=r,this._DomSanitizer=s,this.device=l,this.filePath=u,this.fileChooser=c,this.file=a,this.utils=_,this.logger=O,this.policyListSrvc=A,this.putPayoutDetails=f,this.modalController=pt,this.alertCtrl=gt,this.translate=dt,this.config=ut,this.chooser=ht,this.fb=k,this.router=mt,this.isShowingLoader=!1,this.canTryAgain=!1,this.isSuccessful=!1,this.today=Date.now(),this.BanksBranch=[],this.policyList=[],this.mimeTypes={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",pdf:"application/pdf",zip:"application/zip"},this.chooseCameraOptions=function(m){this.crntCntrlName=m;var P=this.translate.instant("claim_submission.select_any_file"),M=this.translate.instant("claim_submission.open_camera"),w=this.translate.instant("claim_submission.open_gallery"),T=this.translate.instant("claim_submission.select_pdf"),L=this.translate.instant("claim_submission.cancel");let x;x="ios"==this.utils.getPlatform()?parseInt(this.device.version)<11?[{text:M,handler:()=>{this.openCamera_ios(this.camera.PictureSourceType.CAMERA,0,"camera",m)}},{text:w,handler:()=>{this.openCamera_ios(this.camera.PictureSourceType.PHOTOLIBRARY,0,"gallary",m)}},{text:L,role:"cancel",handler:()=>{this.updatePayoutDetailForm.controls[this.crntCntrlName].controls.name.markAsTouched()}}]:[{text:M,handler:()=>{this.openCamera_ios(this.camera.PictureSourceType.CAMERA,0,"camera",m)}},{text:w,handler:()=>{this.openCamera_ios(this.camera.PictureSourceType.PHOTOLIBRARY,0,"gallary",m)}},{text:T,handler:()=>{this.openCameraGallery_ios(m)}},{text:L,role:"cancel",handler:()=>{this.updatePayoutDetailForm.controls[this.crntCntrlName].controls.name.markAsTouched()}}]:[{text:M,handler:()=>{this.openCameraGallery(this.camera.PictureSourceType.CAMERA,0,m)}},{text:w,handler:()=>{this.openCameraGallery(this.camera.PictureSourceType.PHOTOLIBRARY,2,m)}},{text:T,handler:()=>{this.openFilechooser(1,m)}},{text:L,role:"cancel",handler:()=>{this.updatePayoutDetailForm.controls[this.crntCntrlName].controls.name.markAsTouched()}}],this.actionSheetCtrl.create({header:P,buttons:x}).then(ft=>ft.present())},this.dummycamera=function(m){this.updatePayoutDetailForm.get(m).controls.name.markAsDirty(),this.updatePayoutDetailForm.get(m).controls.base64string.markAsDirty(),this.updatePayoutDetailForm.get(m).controls.name.setValue("fileName"),this.updatePayoutDetailForm.get(m).controls.base64string.setValue("Base64String")},this.utils.analytics("updatePayoutDetails"),this.config.currentPage.pageName="UpdatePayoutDetailsPage",this.updatePayoutDetailForm=k.group({accountHolder:["",[h.kI.required,h.kI.minLength(2),h.kI.maxLength(200)]],accountHolderIc:["",[h.kI.required]],bankBranchCode:["",[h.kI.required]],bankAccountNumber:["",[h.kI.required]],nricUpload:this.fb.group({name:["",[h.kI.required]],base64string:["",[h.kI.required]]}),passbookUpload:this.fb.group({name:["",[h.kI.required]],base64string:["",[h.kI.required]]}),policyNumber:this.fb.array([])}),this.selectOptions={cssClass:"selectPopover-updatePayoutDetails"}}ngOnInit(){console.log("ionViewDidLoad updatePayoutDetails"),this.getAccountholdernameandICNumber()}onChange(e,i){const n=this.updatePayoutDetailForm.controls.policyNumber;if(i.detail.checked)n.push(new h.NI(e));else{let r=n.controls.findIndex(s=>s.value==e);n.removeAt(r)}}openCamera_ios(e,i,n,r){this.camera.getPicture({destinationType:this.camera.DestinationType.DATA_URL,mediaType:this.camera.MediaType.PICTURE,encodingType:this.camera.EncodingType.JPEG,sourceType:e,correctOrientation:!0}).then(l=>{if("camera"==n)var u="sunaccesDatajpg001.jpg",c="jpg";else"gallary"==n?(u="sunaccesDatajpeg002.jpeg",c="jpeg"):(u="sunaccesDatapdf003.pdf",c="pdf");var a;this.checkFileExt(c,i)?(console.log("acceptpdf_ios",i),console.log("fileext_ios",c),"camera"==n?(console.log("CameraimageData",l),this.addAttachment(u,l,r)):"gallary"==n?(console.log("GalleryimageData",l),this.addAttachment(u,l,r)):(console.log("Pdf",l),this.addAttachment(u,l,r))):"png"==c||"jpeg"==c||"jpg"==c||"pdf"==c?(a=this.translate.instant(1==i?"claim_submission.select_only_pdf":"claim_submission.select_only_imgs"),this.utils.showAlert("",a,!1)):(a=this.translate.instant(0==i?"claim_submission.select_only_imgs":"claim_submission.select_only_pdf"),this.utils.showAlert("",a,!1))},l=>{let u;u=this.translate.instant(0==i?"claim_submission.err_cam":"claim_submission.err_pdf"),this.utils.showAlert("",u,!1)})}openFilechooser(e,i){1==e?this.chooser.getFile().then(n=>{if("pdf"==n.name.split(".").pop().toLowerCase())this.checkBase64SizeWithPdf(n,n.name,i);else{var s=this.translate.instant("claim_submission.select_only_pdf");this.utils.showAlert("",s,!1)}console.log(n?n.name:"canceled")}).catch(n=>{let r=this.translate.instant("claim_submission.err_pdf");this.utils.showAlert("",r,!1)}):this.fileChooser.open().then(n=>{this.file.resolveLocalFilesystemUrl(n).then(r=>{this.filePath.resolveNativePath(r.nativeURL).then(l=>{-1===l.indexOf("file://")&&(l="file://"+l);var u=(l=l.split("?")[0]).split("/").pop(),c=l.split(".").pop().toLowerCase();if("png"==c||"jpeg"==c||"jpg"==c)this.getBase64StringFromFilePath(l,u,i);else{let a=this.translate.instant("claim_submission.select_only_imgs");this.utils.showAlert("",a,!1)}},l=>{let u=this.translate.instant("claim_submission.err_gallery");this.utils.showAlert("",u,!1)})},r=>{var s=this.translate.instant("claim_submission.err_gallery");this.utils.showAlert("",s,!1)})},n=>{var r=this.translate.instant("claim_submission.err_gallery");this.utils.showAlert("",r,!1)})}checkBase64SizeWithPdf(e,i,n){this.utils.showProgressLoader();let r=i.split(".").pop().toLowerCase(),s=e.dataURI.split(",");s=s.length>0?s[1]:s[0];try{let l=(s.match(/(=*)$/)||[])[1].length;if((s.length*(3/4)-l)/1e6<5){let a;a="pdf"==r?this.utils.sanitizeBase64string(s):s.replace(/(\r\n|\r|\n)/g,""),this.addAttachment(i,a,n)}else"pdf"==r?(this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("claim_submission.err_sizeLimit"),!1)):this.utils.FileCompresser(e.dataURI,this.mimeTypes[r]).then(a=>{let _=((a=(a=a.split(",")).length>0?a[1]:a[0]).match(/(=*)$/)||[])[1].length;if((a.length*(3/4)-_)/1e6<5){let f=a.replace(/(\r\n|\r|\n)/g,"");this.addAttachment(i,f,n)}else this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("claim_submission.err_sizeLimit"),!1)},a=>{this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("generic_msgs.server_err"),!1)})}catch(l){this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("generic_msgs.server_err"),!1)}}checkBase64Size(e,i,n){this.utils.showProgressLoader();let r=i.split(".").pop().toLowerCase(),s=e.split(",");s=s.length>0?s[1]:s[0];try{let l=(s.match(/(=*)$/)||[])[1].length;if((s.length*(3/4)-l)/1e6<5){let a;a="pdf"==r?this.utils.sanitizeBase64string(s):s.replace(/(\r\n|\r|\n)/g,""),this.addAttachment(i,a,n)}else"pdf"==r?(this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("claim_submission.err_sizeLimit"),!1)):this.utils.FileCompresser(e,this.mimeTypes[r]).then(a=>{let _=((a=(a=a.split(",")).length>0?a[1]:a[0]).match(/(=*)$/)||[])[1].length;if((a.length*(3/4)-_)/1e6<5){let f=a.replace(/(\r\n|\r|\n)/g,"");this.addAttachment(i,f,n)}else this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("claim_submission.err_sizeLimit"),!1)},a=>{this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("generic_msgs.server_err"),!1)})}catch(l){this.utils.dissmisProgressLoader(),this.utils.showAlert("",this.translate.instant("generic_msgs.server_err"),!1)}}getBase64StringFromFilePath(e,i,n){this.base64.encodeFile(e).then(r=>{this.checkBase64Size(r,i,n)},r=>{this.utils.dissmisProgressLoader();var s=this.translate.instant("claim_submission.err_bas64");this.utils.showAlert("",s)})}openCameraGallery(e,i,n){this.camera.getPicture({destinationType:this.camera.DestinationType.FILE_URI,mediaType:this.camera.MediaType.PICTURE,encodingType:this.camera.EncodingType.JPEG,sourceType:e,correctOrientation:!0}).then(s=>{"ios"==this.utils.getPlatform()&&(s=window.Ionic.normalizeURL(s)),console.log("imageData",s);var u=s.split("/").pop().split("?")[0];console.log("filename",u);var a,c=s.split(".").pop().toLowerCase();console.log("fileext",c),c=c.split("?")[0],console.log("fileext-after?",c),this.checkFileExt(c,i)?2==i?(console.log("GalleryimageData",s),this.getBase64StringFromFilePath(s,u,n)):(console.log("CameraimageData",s),this.getBase64StringFromFilePath(s,u,n)):"png"==c||"jpeg"==c||"jpg"==c||"pdf"==c?(a=this.translate.instant(1==i?"claim_submission.select_only_pdf":"claim_submission.select_only_imgs"),this.utils.showAlert("",a,!1)):(a=this.translate.instant(0==i?"claim_submission.select_only_imgs":"claim_submission.select_only_pdf"),this.utils.showAlert("",a,!1))},s=>{let l;l=this.translate.instant(0==i?"claim_submission.err_cam":"claim_submission.err_pdf"),this.utils.showAlert("",l,!1)})}checkFileExt(e,i){return 0==i||2==i?"png"==e||"jpeg"==e||"jpg"==e:"pdf"==e}openCameraGallery_ios(e){this.docPicker.getFile("all").then(i=>{"ios"==this.utils.getPlatform()&&(i=window.Ionic.WebView.convertFileSrc(i));var n=i.split("/").pop();if("pdf"==i.split(".").pop().toLowerCase())this.getBase64StringFromFilePath(i,n,e);else{var s=this.translate.instant("claim_submission.select_only_pdf");this.utils.showAlert("",s,!1)}}).catch(i=>{let n=this.translate.instant("claim_submission.err_pdf");this.utils.showAlert("",n,!1)})}addAttachment(e,i,n){"ios"==this.utils.getPlatform()&&(e=e.split(".").pop().toLowerCase(),e=(new Date).getTime()+"."+e);let r=n;var s={};s.name=e,s.base64string=i,this.updatePayoutDetailForm.controls.passbookUpload.controls.name.value==e||this.updatePayoutDetailForm.controls.nricUpload.controls.name.value==e?(this.utils.dissmisProgressLoader(),this.utils.showAlert("Error","Same file is already uploaded")):(this.updatePayoutDetailForm.get(r).controls.name.markAsDirty(),this.updatePayoutDetailForm.get(r).controls.base64string.markAsDirty(),this.updatePayoutDetailForm.get(r).controls.name.setValue(e),this.updatePayoutDetailForm.get(r).controls.base64string.setValue(i),this.utils.dissmisProgressLoader())}updatePayoutDetails(){if(this.updatePayoutDetailForm.valid){let e=JSON.parse(JSON.stringify(this.updatePayoutDetailForm.value));if(e.bankAccountNumber.length===this.LengthVal||e.bankAccountNumber.length===this.optionalLengthVal)if(this.utils.isDeviceOnLine())this.utils.showProgressLoader(),this.putPayoutDetails.updatePayoutData(e).then(i=>{try{if(this.utils.dissmisProgressLoader(),i.responseJSON)if(i.responseJSON.statusCode==y.yI||i.responseJSON.statusCode==y.OK){let n=i.responseJSON.userMessage||this.translate.instant("generic_msgs.server_err");this.successDialog("Success",n)}else{let n=i.responseJSON.message||i.responseJSON.userMessage||this.translate.instant("generic_msgs.server_err");this.showDialog("",n)}else{let n=i.responseJSON.message||i.responseJSON.userMessage||this.translate.instant("generic_msgs.server_err");this.showDialog("",n)}}catch(n){this.logger.error("loginSuccess catch eror : "+JSON.stringify(n)),this.utils.dissmisProgressLoader();let r=this.translate.instant("generic_msgs.server_err");this.utils.showAlert("",r)}},i=>{let n;this.utils.dissmisProgressLoader(),n=this.utils.handleServiceException(i),this.utils.showAlert("",n)});else{this.utils.dissmisProgressLoader();let i=this.translate.instant("generic_msgs.network_err");this.utils.showAlert("",i)}else this.showPrompt("",this.optionalLengthVal?"Please enter "+this.LengthVal+" / "+this.optionalLengthVal+" digits valid bank account number.":"Please enter "+this.LengthVal+" digits valid bank account number.")}}successDialog(e,i){var n=this;return(0,S.Z)(function*(){const r=yield n.modalController.create({component:D.Z,cssClass:"success-msg",backdropDismiss:!1,componentProps:{redirectionMsg:i,title:e}});return console.log(i),r.onDidDismiss().then(s=>{console.log(s),n.router.navigate("servicePage"==s.data.pageName?["/service"]:"serviceHistoryPage"==s.data.pageName?["service-history"]:["/service"])}),yield r.present()})()}getAccountholdernameandICNumber(){this.utils.isDeviceOnLine()?(this.isShowingLoader=!0,this.canTryAgain=!1,this.putPayoutDetails.getAccounHolderInfo().then(e=>{try{if(e.responseJSON&&e.responseJSON.statusCode==y.OK)this.updatePayoutDetailForm.patchValue({accountHolder:e.responseJSON.name,accountHolderIc:e.responseJSON.identityNo}),this.getPolicyList();else{let i=e.responseJSON.message||e.responseJSON.userMessage||this.translate.instant("generic_msgs.server_err");this.showDialog("",i)}}catch(i){this.isShowingLoader=!1,this.canTryAgain=!0,this.logger.error("getAccountholdernameandICNumber catch eror : "+JSON.stringify(i)),this.getPolicyList()}},e=>{this.isShowingLoader=!1,this.canTryAgain=!0,this.getPolicyList()})):(this.isShowingLoader=!1,this.canTryAgain=!0,this.errorMsg=this.translate.instant("generic_msgs.network_err"))}getPolicyList(){this.policyList.length>0?(this.isShowingLoader=!1,this.canTryAgain=!1):(this.isShowingLoader=!0,this.utils.isDeviceOnLine()?(this.canTryAgain=!1,this.policyListSrvc.getPolicyList(this.utils.getUserIdentity()).then(e=>{try{e.responseJSON&&e.responseJSON.statusCode==y.OK?(this.policyList=e.responseJSON.array,this.getBankStaticdata()):(this.isShowingLoader=!1,this.canTryAgain=!0,this.errorMsg=e.responseJSON.message||e.responseJSON.userMessage||this.translate.instant("generic_msgs.server_err"))}catch(i){this.isShowingLoader=!1,this.canTryAgain=!0,this.logger.error("loginSuccess catch eror : "+JSON.stringify(i)),this.errorMsg=this.translate.instant("generic_msgs.server_err")}},e=>{this.isShowingLoader=!1,this.canTryAgain=!0,this.errorMsg=this.translate.instant("generic_msgs.server_err")})):(this.isShowingLoader=!1,this.canTryAgain=!0,this.errorMsg=this.translate.instant("generic_msgs.network_err")))}getBankStaticdata(){this.utils.isDeviceOnLine()?(this.isShowingLoader=!0,this.putPayoutDetails.getStaticdata().then(e=>{try{e.responseJSON&&200==e.status?(this.BanksBranch=e.responseJSON.CardandPayoutData.BankBranchData,this.isShowingLoader=!1):(this.isShowingLoader=!1,this.logger.error("GET BanksBranch list: "+JSON.stringify(e)),this.errorMsg=this.translate.instant("generic_msgs.server_err"))}catch(i){this.isShowingLoader=!1,this.canTryAgain=!0,this.logger.error("get BanksBranch catch eror : "+JSON.stringify(i)),this.errorMsg=this.translate.instant("generic_msgs.server_err")}},e=>{this.isShowingLoader=!1,this.errorMsg=this.utils.handleServiceException(e)})):(this.isShowingLoader=!1,this.canTryAgain=!0,this.logger.error("Get BanksBranch generic_msgs.network_err"),this.errorMsg=this.translate.instant("generic_msgs.network_err"))}resetAccountNumberAndValidation(e){if(this.bankAccountNumberVal="",this.BanksBranch.length>0)for(let i=0;i<this.BanksBranch.length;i++)this.BanksBranch[i].code==e.detail.value&&(this.LengthVal=this.BanksBranch[i].length,this.optionalLengthVal=this.BanksBranch[i].optionalLength?this.BanksBranch[i].optionalLength:"")}showDialog(e,i){var n=this.translate.instant("claim_submission.ok");this.alertCtrl.create({header:e,message:i,buttons:[{text:n,handler:()=>{this.router.navigate(["/service"])}}],backdropDismiss:!1}).then(l=>l.present())}showPrompt(e,i){this.alertCtrl.create({header:e,message:i,buttons:[{text:"Ok",handler:()=>{}}]}).then(s=>s.present())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.g),t.Y36(g.BX),t.Y36(B.V1),t.Y36(N.D),t.Y36(I.H7),t.Y36(z.A),t.Y36(F.y),t.Y36(J.M),t.Y36(q.$),t.Y36(Y.f),t.Y36(j.U),t.Y36(E.r),t.Y36(R.C),t.Y36(g.IN),t.Y36(g.Br),t.Y36(C.sK),t.Y36(G.i),t.Y36(H.I),t.Y36(h.qu),t.Y36(v.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-payout-details"]],decls:11,vars:6,consts:[["mode","ios"],["color","primary",1,"toolbar"],["slot","start"],["text","","icon","chevron-back-outline",2,"padding-left","15px","font-size","0.7rem"],[1,"bold-font",2,"width","auto","display","contents"],["no-bounce","",1,"app_bg2","text_color_base","ion-padding"],["class","spinnersection ion-text-center",4,"ngIf"],["class","errorMsgSection",4,"ngIf"],["class","white_container_border_radius ion-padding",4,"ngIf"],[1,"spinnersection","ion-text-center"],["name","lines-sharp-small",2,"height","98%"],[1,"errorMsgSection"],["style","--background:var(--ion-color-white);",3,"click",4,"ngIf"],[2,"--background","var(--ion-color-white)",3,"click"],[1,"white_container_border_radius","ion-padding"],[3,"formGroup"],["stacked",""],[1,"mandatory_star"],["lines","none",1,"border"],["type","text","formControlName","accountHolder",3,"placeholder"],[4,"ngIf"],["restrict-input","","restrictInput","number","type","tel","formControlName","accountHolderIc",3,"placeholder"],["select-option","","interface","popover","mode","ios","formControlName","bankBranchCode",3,"interfaceOptions","placeholder","ionChange"],[3,"value","selected",4,"ngFor","ngForOf"],["restrict-input","","restrictInput","number","type","tel","formControlName","bankAccountNumber",3,"placeholder","ngModel"],[1,"documents-upload"],["formGroupName","nricUpload",1,"upload-doc"],["size","12"],["lines","none",2,"border","1px solid #9e9e9e","background","white"],["placeholder","Upload NRIC","readonly","true","formControlName","name","type","text",1,"fileInput"],["name","attach",3,"click"],["formGroupName","passbookUpload",1,"upload-doc"],["readonly","true","placeholder","Upload Passbook / Statement","formControlName","name","type","text",1,"fileInput",3,"click"],[1,"font_family"],["style","margin-top:10px;",4,"ngIf"],["text-center","","align-items-center",""],[1,"btn_center",2,"margin-bottom","50px",3,"disabled","click"],["type","1",2,"margin-top","30px"],[1,"font_li"],[1,"fail"],[3,"value","selected"],[2,"margin-top","10px"],[2,"margin-bottom","15px"],["size","5"],[1,"lbl","font_family"],[1,"lbl","font_family",2,"margin-left","5px"],["size","2"],[4,"ngFor","ngForOf"],[1,"lb2","font_family",2,"margin-left","15px"],[1,"lb2","font_family",2,"margin-left","5px"],["size","2","text-wrap","",1,"checkBox"],["mode","md","value","false",3,"ionChange"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t._UZ(3,"ion-back-button",3),t.qZA(),t.TgZ(4,"ion-title",4),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"ion-content",5),t.YNc(8,V,2,0,"section",6),t.YNc(9,K,4,2,"section",7),t.YNc(10,at,82,57,"div",8),t.qZA()),2&e&&(t.xp6(5),t.hij("",t.lcZ(6,4,"policy_servicing.update_payout_details")," "),t.xp6(3),t.Q6J("ngIf",i.isShowingLoader),t.xp6(1),t.Q6J("ngIf",!i.isShowingLoader&&i.errorMsg),t.xp6(1),t.Q6J("ngIf",!i.isShowingLoader&&!i.errorMsg))},dependencies:[b.sg,b.O5,h._Y,h.JJ,h.JL,g.oU,g.YG,g.Sm,g.nz,g.wI,g.W2,g.Gu,g.gu,g.pK,g.Ie,g.Q$,g.Nd,g.t9,g.n0,g.PQ,g.wd,g.sr,g.w,g.QI,g.j9,g.cs,h.sg,h.u,h.x0,C.X$],styles:['.white_container_border_radius[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.7)!important;border-radius:15px!important}.label[_ngcontent-%COMP%]{font-size:1.7rem!important;color:var(--ion-color-secondary)!important;font-weight:400}p[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:2px;font-family:var(--ion-font-Agenda-Semibold)}.italic_font[_ngcontent-%COMP%]{font-style:italic;margin:7px 0}.mandatory_star[_ngcontent-%COMP%]{color:red}.padding_40[_ngcontent-%COMP%]{padding:40px}@media only screen and (max-width: 374px){select[_ngcontent-%COMP%]{border:0!important;-webkit-appearance:none;-moz-appearance:none;background:#ffffff url(arrow-down.5fe9fee63287056b.png) no-repeat 95% center;width:100%;text-indent:.01px;text-overflow:"";padding:10px;font-size:1.6rem!important;color:#222;position:relative;height:42px}}select[_ngcontent-%COMP%]{border:0!important;-webkit-appearance:none;-moz-appearance:none;background:#ffffff url(arrow-down.5fe9fee63287056b.png) no-repeat 95% center;width:100%;text-indent:.01px;text-overflow:"";padding:10px;font-size:1.6rem!important;color:#222!important;position:relative;height:42px}.fail[_ngcontent-%COMP%]{text-align:start!important;color:red!important;font-size:.9rem!important}.col[_ngcontent-%COMP%]{padding:0!important}.checkBox[_ngcontent-%COMP%]{padding-top:10px!important;padding-left:10px!important;background:transparent}.checkBox[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding:3px 0 0;font-size:1.4rem!important;margin:0}.checkbox-icon[_ngcontent-%COMP%]{border-width:1px!important}.checkbox-checked[_ngcontent-%COMP%]{border-color:var(--ion-color-secondary)!important;background-color:#fff!important}.lbl[_ngcontent-%COMP%]{color:#222!important;font-size:1.1rem}.lb2[_ngcontent-%COMP%]{font-size:1.1rem}.list-header[_ngcontent-%COMP%]{margin-bottom:0!important}.item[_ngcontent-%COMP%]   .item-input.ng-valid.item-input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%], .item.item-input.ng-valid.input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%]{border-bottom-color:none!important;box-shadow:none!important}.item-inner[_ngcontent-%COMP%]{padding-right:0!important;border-bottom:none!important}.input[_ngcontent-%COMP%]{border:1px solid #eee;padding:3px 15px;background:white;font-size:1.4rem}.label[_ngcontent-%COMP%]{font-size:1.8rem!important;color:var(--ion-color-secondary)!important;white-space:pre-line;font-family:var(--ion-font-agenda-semibold)}.date_tile[_ngcontent-%COMP%]{background:var(--ion-color-secondary)!important;color:#fff!important;min-height:0px}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:25px;padding:0 10px;font-size:1.5 rem}.item[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin:0 10px 0 0!important}.ion-checkbox-icon[_ngcontent-%COMP%]{border-color:var(--ion-color-secondary)!important;border-radius:5px!important}.ion-checkbox-checked[_ngcontent-%COMP%]{border-color:var(--ion-color-secondary)!important}.checkbox-inner[_ngcontent-%COMP%]{border-color:#fff!important}.select-text[_ngcontent-%COMP%]{padding:3px 15px}.select-icon[_ngcontent-%COMP%]{display:none}.date_tile[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#eee!important;font-size:1.8rem;margin:0;line-height:24px}.datetime[_ngcontent-%COMP%]{border:1px solid #eee;background:white;font-size:1.4rem}ion-icon[_ngcontent-%COMP%]{display:inline-block;font-size:2rem;margin-left:-10px}.fileInput[_ngcontent-%COMP%]{display:inline-block;width:100%}.text-input[disabled][_ngcontent-%COMP%]{opacity:1}.col[_ngcontent-%COMP%]{text-align:center!important}.row_file[_ngcontent-%COMP%]{height:40px!important}.mandatoryText[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-size:13px;margin-bottom:10px;margin-top:10px;line-height:24px}@media only screen and (max-width: 374px){.date_tile[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.4rem!important}}.item-radio[_ngcontent-%COMP%]   .button-effect[_ngcontent-%COMP%]{transform:none!important;transition:0ms!important}.list-header[_ngcontent-%COMP%]{border:0px}.disabled-dropdown[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{opacity:1}.disabled-dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{opacity:1;background:#ffffff}.row_file[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:last-child{padding:0;margin-top:7px}.sub_title[_ngcontent-%COMP%]{margin-top:3px!important}.row_file[_ngcontent-%COMP%]   .fileInput[_ngcontent-%COMP%]{padding:0 15px}.row_file[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{margin:11px 0}.list-ios[_ngcontent-%COMP%] > .item-block[_ngcontent-%COMP%]:last-child, .list-ios[_ngcontent-%COMP%] > .item-wrapper[_ngcontent-%COMP%]:last-child   .item-block[_ngcontent-%COMP%]{border-bottom:none!important}.list-ios[_ngcontent-%COMP%], .list-ios[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin:0!important}.list-header-ios[_ngcontent-%COMP%]{text-transform:none}.datetime-text[_ngcontent-%COMP%]{padding-left:15px}.row_file[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:0!important}ion-label[_ngcontent-%COMP%]{margin-bottom:8px;white-space:normal}.upload-doc[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;margin-bottom:8px!important;position:relative}.upload-doc[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{display:inline-flex;padding-left:15px;padding-right:40px}.upload-doc[_ngcontent-%COMP%]   ion-input[disabled][_ngcontent-%COMP%]{opacity:.6}.upload-doc[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{margin-left:0}.upload-doc[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]   .text-input[disabled][_ngcontent-%COMP%]{opacity:1}.upload-doc[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:inline-flex;height:100%;justify-content:center;position:absolute;right:10px;width:24px;z-index:9}.btn_center[_ngcontent-%COMP%]{text-transform:capitalize;--background: #002d3d !important;color:var(--ion-color-secondary-contrast);font-size:1.1rem;--border-radius: 10px;min-height:34px;min-width:130px!important;font-family:Agenda-Regular!important}.font_family[_ngcontent-%COMP%]{font-family:var(--ion-font-Agenda-Semibold)}.sc-ion-buttons-ios-h[_ngcontent-%COMP%]{margin-right:-50px}.border[_ngcontent-%COMP%]{border:1px solid #cfc2c2;margin-bottom:2px;background:white;height:40px}ion-checkbox[_ngcontent-%COMP%]{--background-checked: #002d3d !important;--border-color-checked: none !important;--border-width: 1px !important;--border-radius: 5px;height:20px;width:20px;--background: white;--checkmark-color: white}.font_li[_ngcontent-%COMP%]{font-size:.9rem}']}),o})()}];let lt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.Bz.forChild(rt),v.Bz]}),o})(),ct=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[b.ez,h.u5,g.Pc,C.aw,h.UX,lt]}),o})()}}]);