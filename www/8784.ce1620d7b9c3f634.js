"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8784],{38784:(E,w,s)=>{s.r(w),s.d(w,{ChangePasswordPageModule:()=>Y});var m=s(36895),o=s(24006),a=s(48058),h=s(64228),_=s(15861),P=s(43485),v=s(97716),f=s(22727),e=s(98274),x=s(53025),C=s(45340),Z=s(9999),O=s(72703),M=s(38590),A=s(15342),u=s(54463);function T(t,r){1&t&&(e.TgZ(0,"section",8),e._UZ(1,"ion-spinner",9),e.qZA())}function I(t,r){1&t&&(e.TgZ(0,"div",24)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"change_pwd.existing_pwd_required")))}function L(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"img",25),e.NdJ("click",function(c){e.CHM(n);const l=e.oxw(2);return e.KtG(l.openPopup(c))}),e.qZA()}}function S(t,r){1&t&&(e.TgZ(0,"div",24)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"change_pwd.newpasswordisrequired")))}function b(t,r){1&t&&(e.TgZ(0,"div",24)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"change_pwd.invalidNewPassword")))}function N(t,r){1&t&&(e.TgZ(0,"div",24)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"change_pwd.renterpasswordisrequired")))}function y(t,r){1&t&&(e.TgZ(0,"div",24)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"change_pwd.mismatch_pwds")))}function F(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",10)(1,"form",11)(2,"p",12),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"span",13),e._uU(6,"*"),e.qZA()(),e.TgZ(7,"ion-item",14),e._UZ(8,"ion-input",15),e.ALo(9,"translate"),e.qZA(),e.YNc(10,I,4,3,"div",16),e.TgZ(11,"p",17),e._uU(12),e.ALo(13,"translate"),e.TgZ(14,"span",13),e._uU(15," *"),e.qZA(),e.YNc(16,L,1,0,"img",18),e.qZA(),e.TgZ(17,"ion-item",14),e._UZ(18,"ion-input",19),e.ALo(19,"translate"),e.qZA(),e.YNc(20,S,4,3,"div",16),e.YNc(21,b,4,3,"div",16),e.TgZ(22,"p",20),e._uU(23),e.ALo(24,"translate"),e.TgZ(25,"span",13),e._uU(26,"*"),e.qZA()(),e.TgZ(27,"ion-item",14),e._UZ(28,"ion-input",21),e.ALo(29,"translate"),e.qZA(),e.YNc(30,N,4,3,"div",16),e.YNc(31,y,4,3,"div",16),e.TgZ(32,"ion-row",22)(33,"ion-col")(34,"ion-button",23),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.changePassword())}),e._uU(35),e.ALo(36,"translate"),e.qZA()()()()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("formGroup",n.changePasswordForm),e.xp6(2),e.hij("",e.lcZ(4,15,"change_pwd.existing_pwd")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(9,17,"change_pwd.existing_pwd")),e.xp6(2),e.Q6J("ngIf",n.changePasswordForm.get("existingPassword").hasError("required")&&n.changePasswordForm.get("existingPassword").touched),e.xp6(2),e.hij("",e.lcZ(13,19,"change_pwd.newpassword")," "),e.xp6(4),e.Q6J("ngIf",!n.isValidUser),e.xp6(2),e.s9C("placeholder",e.lcZ(19,21,"change_pwd.placeholder_new_pwd")),e.xp6(2),e.Q6J("ngIf",n.changePasswordForm.get("newPassword").hasError("required")&&n.changePasswordForm.get("newPassword").touched),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.get("newPassword").hasError("pattern")&&n.changePasswordForm.get("newPassword").touched),e.xp6(2),e.hij(" ",e.lcZ(24,23,"change_pwd.reenternewpasword")," "),e.xp6(5),e.s9C("placeholder",e.lcZ(29,25,"change_pwd.reenternewpasword")),e.xp6(2),e.Q6J("ngIf",n.changePasswordForm.get("reenternewPassword").hasError("required")&&n.changePasswordForm.get("reenternewPassword").touched),e.xp6(1),e.Q6J("ngIf",!n.changePasswordForm.get("reenternewPassword").hasError("required")&&n.changePasswordForm.get("newPassword").value!==n.changePasswordForm.get("reenternewPassword").value&&n.changePasswordForm.get("reenternewPassword").touched),e.xp6(3),e.Q6J("disabled",!n.changePasswordForm.valid),e.xp6(1),e.Oqu(e.lcZ(36,27,"change_pwd.reset"))}}const J=[{path:"",component:(()=>{class t{constructor(n,i,c,l,g,d,p,k,q,D,j){this.router=n,this.utils=i,this.translateConfigService=c,this.logger=l,this.changePassswordService=g,this.alertCtrl=d,this.authHandler=p,this.config=k,this.popOverCtrl=q,this.jsonStore=D,this.translate=j,this.isShowingLoader=!1,this.str1="five",this.selectedLanguage=this.translateConfigService.getDefaultLanguage(),this.translateConfigService.setLanguage("en")}ngOnInit(){let n=P.i.PASSWORD_PATTERN;this.changePasswordForm=new o.cw({existingPassword:new o.NI("",[o.kI.required]),newPassword:new o.NI("",[o.kI.required,o.kI.pattern(n),o.kI.minLength(8)]),reenternewPassword:new o.NI("",[o.kI.required,o.kI.pattern(n),o.kI.minLength(8)])})}ionViewDidLoad(){this.logger.log("ionViewDidLoad ChangePasswordPage")}changePassword(){if(this.utils.showProgressLoader(),this.changePasswordForm.valid){let i=this.changePasswordForm.controls.existingPassword.value.trim(),c=this.changePasswordForm.controls.newPassword.value.trim(),l=this.changePasswordForm.controls.reenternewPassword.value.trim();if(c!==l){var n=this.translate.instant("change_pwd.mismatch_pwds");return this.utils.dissmisProgressLoader(),void this.utils.showAlert("",n)}if(this.utils.isDeviceOnLine())this.utils.showProgressLoader(),this.changePassswordService.changePasswordService(i,c,l).then(g=>{try{if(g.responseJSON)if(g.responseJSON.statusCode==f.yI||g.responseJSON.statusCode==f.OK){let d=this.translate.instant("change_pwd.change_pwd_success_txt"),p=g.responseJSON.userMessage||d;this.isSuccess=!0,this.utils.dissmisProgressLoader(),this.showDialog("",p)}else{let d=g.responseJSON.userMessage||this.translate.instant("generic_msgs.server_err");this.isSuccess=!1,this.utils.dissmisProgressLoader(),this.utils.showAlert("",d)}}catch(d){this.utils.dissmisProgressLoader(),this.isSuccess=!1,this.logger.error("loginSuccess catch eror : "+JSON.stringify(d));let p=this.translate.instant("generic_msgs.server_err");this.utils.showAlert("",p)}},g=>{this.utils.dissmisProgressLoader(),this.isSuccess=!1;let d=this.utils.handleServiceException(g);this.utils.showAlert("",d)});else{this.utils.dissmisProgressLoader(),this.isSuccess=!1;let g=this.translate.instant("generic_msgs.network_err");this.utils.showAlert("",g)}}}showDialog(n,i){let l=[{text:this.translate.instant("change_pwd.Ok"),handler:()=>{this.authHandler.logout(),this.config.userInfo={},this.config.userDetails={},this.config.passCodeInfo={},null!=this.config.sessionTimeout&&(clearTimeout(this.config.sessionTimeout),this.config.sessionTimeout=null),null!=this.config.interValID&&(clearInterval(this.config.interValID),this.config.interValID=null),this.jsonStore.removeDataInJson(this.jsonStore.collectionNames.userDetails),this.router.navigate(["/login-first"],{state:{animate:!0,direction:"forward",loadInitialLogin:!0}})}}];this.alertCtrl.create({header:n,message:i,buttons:l}).then(d=>d.present())}openPopup(n){var i=this;return(0,_.Z)(function*(){yield(yield i.popOverCtrl.create({component:v.j,showBackdrop:!1,event:n,componentProps:{msg:i.str1},cssClass:"custom-popover"})).present()})()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.F0),e.Y36(x.f),e.Y36(C.w),e.Y36(Z.U),e.Y36(O.l),e.Y36(a.Br),e.Y36(M.P),e.Y36(P.i),e.Y36(a.Dh),e.Y36(A.D),e.Y36(u.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-change-password"]],decls:10,vars:5,consts:[["mode","ios"],["color","primary",1,"toolbar"],["slot","start"],["text","","icon","chevron-back-outline",2,"padding-left","15px","font-size","0.7rem"],[1,"bold-font"],["no-bounce","",1,"app_bg1","text_color_base","padding_15","ion-padding"],["class","spinnersection ion-text-center",4,"ngIf"],["class","white_container_border_radius padding_015",4,"ngIf"],[1,"spinnersection","ion-text-center"],["name","lines-sharp-small",2,"height","98%"],[1,"white_container_border_radius","padding_015"],[3,"formGroup"],["position","stacked",2,"padding-top","10px"],[1,"mandatory_star"],["lines","none",1,"border"],["type","password","clearOnEdit","false","formControlName","existingPassword",3,"placeholder"],["class","fail",4,"ngIf"],["position","stacked","clear",""],["src","../../../assets/imgs/circle-question-solid.svg","alt","...","style","width: 16px; float: right;",3,"click",4,"ngIf"],["type","password","clearOnEdit","false","formControlName","newPassword",1,"newPassword",3,"placeholder"],["position","stacked"],["type","password","clearOnEdit","false","formControlName","reenternewPassword",3,"placeholder"],["text-center","","align-items-center","",1,"padding_150"],[1,"btn_center",3,"disabled","click"],[1,"fail"],["src","../../../assets/imgs/circle-question-solid.svg","alt","...",2,"width","16px","float","right",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-back-button",3),e.qZA(),e.TgZ(4,"ion-title",4),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"ion-content",5),e.YNc(8,T,2,0,"section",6),e.YNc(9,F,37,29,"div",7),e.qZA()),2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,3,"change_pwd.title")," "),e.xp6(3),e.Q6J("ngIf",i.isShowingLoader),e.xp6(1),e.Q6J("ngIf",!i.isShowingLoader))},dependencies:[m.O5,o._Y,o.JJ,o.JL,a.oU,a.YG,a.Sm,a.wI,a.W2,a.Gu,a.pK,a.Ie,a.Nd,a.PQ,a.wd,a.sr,a.j9,a.cs,o.sg,o.u,u.X$],styles:[".app_bg1[_ngcontent-%COMP%]{--background: url(register_bg.35962209e77bb744.jpg) no-repeat center center / cover;background-size:cover;background-repeat:no-repeat;height:100%;background-position:bottom}.padding_15[_ngcontent-%COMP%]{padding:15px}.white_container_border_radius[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.7)!important;border-radius:15px!important}.spinnersection[_ngcontent-%COMP%]{display:block;flex-direction:column;justify-content:center;align-items:center;font-size:1.3rem;height:98%}.padding_015[_ngcontent-%COMP%]{padding:0 15px}.mandatory_star[_ngcontent-%COMP%]{color:red}.sucess[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002d3d!important}.fail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red!important}.sucess[_ngcontent-%COMP%], .fail[_ngcontent-%COMP%]{text-align:start!important}.newPassword[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{margin:8px 8px 8px 0!important}.padding_150[_ngcontent-%COMP%]{padding:15px 0!important}.item[_ngcontent-%COMP%]{padding-left:0;background:transparent}.item[_ngcontent-%COMP%]   .item-input.ng-valid.item-input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%], .item.item-input.ng-valid.input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%]{border-bottom-color:none!important;box-shadow:none!important}.item-inner[_ngcontent-%COMP%]{padding-right:0!important;border-bottom:none!important}.input[_ngcontent-%COMP%]{border:1px solid #eee;padding:3px 15px;background:white;font-size:1.4rem}.label[_ngcontent-%COMP%]{margin-bottom:5px!important;font-size:1.8rem!important;color:#002d3d!important;font-weight:400}p[_ngcontent-%COMP%]{font-size:1.1rem!important;margin:10px 0 5px}.italic_font[_ngcontent-%COMP%]{font-style:italic;margin:7px 0}p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.85em;float:right;padding:5px}.btn_center[_ngcontent-%COMP%]{text-transform:capitalize;--background: #002d3d !important;color:#fff;margin-top:15px;--border-radius: 10px;min-height:40px;width:100%!important;font-family:Agenda-Regular!important}"]}),t})()}];let U=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(J),h.Bz]}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,o.u5,a.Pc,u.aw,o.UX,U]}),t})()}}]);