"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9773],{99773:(rt,m,s)=>{s.r(m),s.d(m,{PaymentHistoryPageModule:()=>at});var p=s(36895),d=s(24006),_=s(48058),g=s(64228),y=s(65414),f=s(22727),t=s(98274),u=s(53025),x=s(9999),P=s(70131),l=s(54463),h=s(43485),w=s(45340);const Z=["Content"];function T(n,e){1&n&&(t.TgZ(0,"ion-title"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"payment_history.title")))}function H(n,e){1&n&&(t.TgZ(0,"ion-title"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"payment_history.titleEmandate")))}function v(n,e){1&n&&(t.TgZ(0,"section",9),t._UZ(1,"ion-spinner",10),t.qZA())}function A(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(i);const a=t.oxw(2);return t.KtG(a.getPaymentHistory())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"generic_msgs.try_again")))}function N(n,e){if(1&n&&(t.TgZ(0,"section",11)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,A,3,3,"button",12),t.qZA()),2&n){const i=t.oxw();t.xp6(2),t.Oqu(i.errorMsg),t.xp6(1),t.Q6J("ngIf",i.canTryAgain)}}function O(n,e){1&n&&t._UZ(0,"ion-icon",23)}function M(n,e){1&n&&t._UZ(0,"ion-icon",24)}function L(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"ion-row",19)(1,"ion-item",20),t.NdJ("click",function(a){t.CHM(i);const r=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.expandItem(r,a))}),t._uU(2),t.YNc(3,O,1,0,"ion-icon",21),t.YNc(4,M,1,0,"ion-icon",22),t.qZA()()}if(2&n){const i=t.oxw().$implicit;t.xp6(2),t.hij(" ",i.transactionDate," "),t.xp6(1),t.Q6J("ngIf",!i.expanded),t.xp6(1),t.Q6J("ngIf",i.expanded)}}function I(n,e){1&n&&t._UZ(0,"ion-icon",23)}function J(n,e){1&n&&t._UZ(0,"ion-icon",24)}function q(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"ion-row",19)(1,"ion-item",20),t.NdJ("click",function(a){t.CHM(i);const r=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.expandItem(r,a))}),t._uU(2),t.YNc(3,I,1,0,"ion-icon",21),t.YNc(4,J,1,0,"ion-icon",22),t.qZA()()}if(2&n){const i=t.oxw().$implicit;t.xp6(2),t.hij(" ",i.paymentDate," "),t.xp6(1),t.Q6J("ngIf",!i.expanded),t.xp6(1),t.Q6J("ngIf",i.expanded)}}function Y(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.policyNumber)}}function b(n,e){1&n&&t._UZ(0,"p",29)}function C(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.paymentDate)}}function U(n,e){1&n&&t._UZ(0,"p",29)}function Q(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(3).$implicit;t.xp6(1),t.Oqu(i.amount)}}function S(n,e){1&n&&t._UZ(0,"p",29)}function D(n,e){if(1&n&&(t.TgZ(0,"ion-row")(1,"div",26)(2,"p",27),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,Q,2,1,"p",28),t.YNc(6,S,1,0,"p",28),t.qZA()()),2&n){const i=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,3,"payment_history.authorization_amount")),t.xp6(2),t.Q6J("ngIf",i.premiumAmount),t.xp6(1),t.Q6J("ngIf",!i.premiumAmount)}}function E(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(3).$implicit;t.xp6(1),t.Oqu(i.premiumAmount)}}function $(n,e){1&n&&t._UZ(0,"p",29)}function k(n,e){if(1&n&&(t.TgZ(0,"ion-row")(1,"div",26)(2,"p",27),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,E,2,1,"p",28),t.YNc(6,$,1,0,"p",28),t.qZA()()),2&n){const i=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,3,"payment_history.PremiumAmount")),t.xp6(2),t.Q6J("ngIf",i.premiumAmount),t.xp6(1),t.Q6J("ngIf",!i.premiumAmount)}}function z(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.txnID)}}function j(n,e){1&n&&t._UZ(0,"p",29)}function R(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.status)}}function F(n,e){1&n&&t._UZ(0,"p",29)}function G(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(3).$implicit;t.xp6(1),t.Oqu(i.bankName)}}function B(n,e){1&n&&t._UZ(0,"p",29)}function K(n,e){if(1&n&&(t.TgZ(0,"ion-row")(1,"div",26)(2,"p",27),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,G,2,1,"p",28),t.YNc(6,B,1,0,"p",28),t.qZA()()),2&n){const i=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,3,"payment_history.bank_name")),t.xp6(2),t.Q6J("ngIf",i.cardNo),t.xp6(1),t.Q6J("ngIf",!i.cardNo)}}function V(n,e){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const i=t.oxw(3).$implicit;t.xp6(1),t.Oqu(i.cardNo)}}function W(n,e){1&n&&t._UZ(0,"p",29)}function X(n,e){if(1&n&&(t.TgZ(0,"ion-row")(1,"div",26)(2,"p",27),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,V,2,1,"p",28),t.YNc(6,W,1,0,"p",28),t.qZA()()),2&n){const i=t.oxw(2).$implicit;t.xp6(3),t.Oqu(t.lcZ(4,3,"payment_history.CardNo")),t.xp6(2),t.Q6J("ngIf",i.cardNo),t.xp6(1),t.Q6J("ngIf",!i.cardNo)}}function tt(n,e){if(1&n&&(t.TgZ(0,"div",25)(1,"ion-row")(2,"div",26)(3,"p",27),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,Y,2,1,"p",28),t.YNc(7,b,1,0,"p",28),t.qZA()(),t.TgZ(8,"ion-row")(9,"div",26)(10,"p",27),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,C,2,1,"p",28),t.YNc(14,U,1,0,"p",28),t.qZA()(),t.YNc(15,D,7,5,"ion-row",4),t.YNc(16,k,7,5,"ion-row",4),t.TgZ(17,"ion-row")(18,"div",26)(19,"p",27),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,z,2,1,"p",28),t.YNc(23,j,1,0,"p",28),t.qZA()(),t.TgZ(24,"ion-row")(25,"div",26)(26,"p",27),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.YNc(29,R,2,1,"p",28),t.YNc(30,F,1,0,"p",28),t.qZA()(),t.YNc(31,K,7,5,"ion-row",4),t.YNc(32,X,7,5,"ion-row",4),t.qZA()),2&n){const i=t.oxw().$implicit,o=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,16,"payment_history.PolicyNo")),t.xp6(2),t.Q6J("ngIf",i.policyNumber),t.xp6(1),t.Q6J("ngIf",!i.policyNumber),t.xp6(4),t.Oqu(t.lcZ(12,18,"payment_history.PaymentDate")),t.xp6(2),t.Q6J("ngIf",i.paymentDate),t.xp6(1),t.Q6J("ngIf",!i.paymentDate),t.xp6(1),t.Q6J("ngIf",o.isEMandate),t.xp6(1),t.Q6J("ngIf",!o.isEMandate),t.xp6(4),t.Oqu(t.lcZ(21,20,"payment_history.TxnID")),t.xp6(2),t.Q6J("ngIf",i.txnID),t.xp6(1),t.Q6J("ngIf",!i.txnID),t.xp6(4),t.Oqu(t.lcZ(28,22,"payment_history.Status")),t.xp6(2),t.Q6J("ngIf",i.status),t.xp6(1),t.Q6J("ngIf",!i.status),t.xp6(1),t.Q6J("ngIf",o.isEMandate),t.xp6(1),t.Q6J("ngIf",!o.isEMandate)}}function nt(n,e){if(1&n&&(t.TgZ(0,"ion-list"),t.YNc(1,L,5,3,"ion-row",16),t.YNc(2,q,5,3,"ion-row",17),t.YNc(3,tt,33,24,"div",18),t.qZA()),2&n){const i=e.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o.isEMandate),t.xp6(1),t.Q6J("ngIf",!o.isEMandate),t.xp6(1),t.Q6J("ngIf",i.expanded)}}function it(n,e){if(1&n&&(t.TgZ(0,"section",14),t.YNc(1,nt,4,3,"ion-list",15),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.paymentHistoryList)}}const et=[{path:"",component:(()=>{class n{constructor(i,o,a,r,c,st,_t){this.utils=i,this.logger=o,this.getPaymentHistoryList=a,this.translate=r,this.changeDetectorRef=c,this.config=st,this.translateConfigService=_t,this.paymentHistoryList=[],this.isShowingLoader=!0,this.canTryAgain=!1,this.isEMandate=!1,this.selectedLanguage=this.translateConfigService.getDefaultLanguage(),this.translateConfigService.setLanguage("en")}ngOnInit(){this.getPaymentHistory()}ionViewDidLoad(){this.logger.log("ionViewDidLoad PaymentHistoryPage")}ionViewWillEnter(){this.utils.component.emit(this.isEMandate?y.c.DD_HISTORY:y.c.PAYMENT_HISTORY)}getPaymentHistory(){this.utils.isDeviceOnLine()?(this.canTryAgain=!1,this.getPaymentHistoryList.getPaymentHistory(this.isEMandate).then(i=>{try{this.isShowingLoader=!1,i.responseJSON&&i.responseJSON.statusCode==f.OK?(this.paymentHistoryList=i.responseJSON.array,this.paymentHistoryList.length<=0?this.errorMsg=this.translate.instant("generic_msgs.no_data"):this.paymentHistoryList.sort(this.isEMandate?(o,a)=>new Date(a.TransactionDate.split("-").reverse().join("-")).getTime()-new Date(o.TransactionDate.split("-").reverse().join("-")).getTime():(o,a)=>new Date(a.PaymentDate.split("-").reverse().join("-")).getTime()-new Date(o.PaymentDate.split("-").reverse().join("-")).getTime())):this.errorMsg=i.responseJSON.Message||i.responseJSON.userMessage||i.responseJSON.message||this.translate.instant("generic_msgs.server_err")}catch(o){this.isShowingLoader=!1,this.canTryAgain=!0,this.logger.error("getPaymentHistory catch eror : "+JSON.stringify(o)),this.errorMsg=this.translate.instant("generic_msgs.server_err")}},i=>{this.isShowingLoader=!1,this.canTryAgain=!0,this.errorMsg=this.utils.handleServiceException(i)})):(this.isShowingLoader=!1,this.canTryAgain=!0,this.errorMsg=this.translate.instant("generic_msgs.network_err"))}expandItem(i,o){this.paymentHistoryList.map(a=>(i==a?(a.expanded=!a.expanded,a.expanded&&setTimeout(()=>{let r=this.paymentHistoryList.indexOf(i);this.content.scrollTo(0,this.content._elementRef.nativeElement.childNodes[1].childNodes[6].childNodes[r+2].offsetTop,1e3)},200)):a.expanded=!1,a))}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.f),t.Y36(x.U),t.Y36(P.c),t.Y36(l.sK),t.Y36(t.sBO),t.Y36(h.i),t.Y36(w.w))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-history"]],viewQuery:function(i,o){if(1&i&&t.Gf(Z,5),2&i){let a;t.iGM(a=t.CRH())&&(o.content=a.first)}},decls:10,vars:5,consts:[["mode","ios"],["color","primary"],["slot","start"],["text","","icon","chevron-back-outline",2,"padding-left","15px","font-size","0.7rem"],[4,"ngIf"],["no-bounce","",1,"app_bg2","ion-padding"],["class","spinnersection ion-text-center",4,"ngIf"],["class","errorMsgSection white_container_border_radius",4,"ngIf"],["class","white_container_border_radius padding_15",4,"ngIf"],[1,"spinnersection","ion-text-center"],["name","lines-sharp-small",2,"height","98%"],[1,"errorMsgSection","white_container_border_radius"],["style","--background:var(--ion-color-white);",3,"click",4,"ngIf"],[2,"--background","var(--ion-color-white)",3,"click"],[1,"white_container_border_radius","padding_15"],[4,"ngFor","ngForOf"],["style","border-bottom:none; display: block; padding: 0px 10px 0px 10px;",4,"ngIf"],["style","border-bottom:none; display:block; padding: 0px 10px 0px 10px;",4,"ngIf"],["class","accordianContent",4,"ngIf"],[2,"border-bottom","none","display","block","padding","0px 10px 0px 10px"],["lines","none",1,"font_size_14",3,"click"],["style","color:white","slot","end","name","chevron-forward-outline",4,"ngIf"],["style","color:white","slot","end","name","chevron-down-outline",4,"ngIf"],["slot","end","name","chevron-forward-outline",2,"color","white"],["slot","end","name","chevron-down-outline",2,"color","white"],[1,"accordianContent"],[1,"margin_top_bottom_auto","div-padding"],[1,"lbl-header"],["class","lbl-content",4,"ngIf"],[1,"lbl-content"]],template:function(i,o){1&i&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t._UZ(3,"ion-back-button",3),t.qZA(),t.YNc(4,T,3,3,"ion-title",4),t.YNc(5,H,3,3,"ion-title",4),t.qZA()(),t.TgZ(6,"ion-content",5),t.YNc(7,v,2,0,"section",6),t.YNc(8,N,4,2,"section",7),t.YNc(9,it,2,1,"section",8),t.qZA()),2&i&&(t.xp6(4),t.Q6J("ngIf",!o.isEMandate),t.xp6(1),t.Q6J("ngIf",o.isEMandate),t.xp6(2),t.Q6J("ngIf",o.isShowingLoader),t.xp6(1),t.Q6J("ngIf",!(o.paymentHistoryList.length>0||o.isShowingLoader)),t.xp6(1),t.Q6J("ngIf",o.paymentHistoryList.length>0))},dependencies:[p.sg,p.O5,_.oU,_.Sm,_.W2,_.Gu,_.gu,_.Ie,_.q_,_.Nd,_.PQ,_.wd,_.sr,_.cs,l.X$],styles:[".white_container_border_radius[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.7)!important;border-radius:15px!important}.spinnersection[_ngcontent-%COMP%]{display:block;flex-direction:column;justify-content:center;align-items:center;font-size:1.3rem;height:98%}.errorMsgSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:98%;font-size:.8rem;color:#494747!important;padding:0 15px}.padding_15[_ngcontent-%COMP%]{padding:15px!important}.item.item-block[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{padding-right:0;border-bottom:none!important}.ion-ios-arrow-forward[_ngcontent-%COMP%]:before, .ion-ios-arrow-down[_ngcontent-%COMP%]:before{font-size:1.5rem!important;font-weight:600!important}.item[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%], .item-inner[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{min-height:1rem;font-size:1.2rem;line-height:1;margin-bottom:15px}.list[_ngcontent-%COMP%]{margin:0 0 5px}.accordianContent[_ngcontent-%COMP%]{padding:0 15px;color:#002d3d}.div-padding[_ngcontent-%COMP%]{padding:10px 0 0}.lbl-header[_ngcontent-%COMP%]{padding:0;font-family:Agenda-Regular;color:--ion-color-secondary;font-size:14px;line-height:24px;margin:0;font-weight:600}.lbl-content[_ngcontent-%COMP%]{padding:0;font-family:Agenda-Regular;color:--ion-color-secondary;font-size:14px;line-height:24px;margin:0;font-weight:400}button[_ngcontent-%COMP%]{min-height:3.44rem!important}.label[_ngcontent-%COMP%]{margin:0!important}.button-effect[_ngcontent-%COMP%]{transform:none!important;transition:none!important}ion-item[_ngcontent-%COMP%]{--background: #002d3d;color:#fff;font-size:10px;line-height:20px;width:100%;min-height:3rem;text-transform:capitalize}.list-md[_ngcontent-%COMP%]{background:none!important}"]}),n})()}];let ot=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(et),g.Bz]}),n})(),at=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,d.u5,_.Pc,l.aw,ot]}),n})()}}]);