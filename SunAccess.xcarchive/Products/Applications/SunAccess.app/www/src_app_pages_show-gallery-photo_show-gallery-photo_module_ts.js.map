{"version":3,"file":"src_app_pages_show-gallery-photo_show-gallery-photo_module_ts.js","mappings":"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","sources":["./src/app/pages/show-gallery-photo/show-gallery-photo-routing.module.ts","./src/app/pages/show-gallery-photo/show-gallery-photo.module.ts","./src/app/pages/show-gallery-photo/show-gallery-photo.page.html","./src/app/pages/show-gallery-photo/show-gallery-photo.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ShowGalleryPhotoPage } from './show-gallery-photo.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ShowGalleryPhotoPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ShowGalleryPhotoPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ShowGalleryPhotoPageRoutingModule } from './show-gallery-photo-routing.module';\r\n\r\nimport { ShowGalleryPhotoPage } from './show-gallery-photo.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    ShowGalleryPhotoPageRoutingModule\r\n  ],\r\n  declarations: [ShowGalleryPhotoPage]\r\n})\r\nexport class ShowGalleryPhotoPageModule {}\r\n","<ion-header>\r\n  <ion-toolbar class=\"header-bg\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"#\" text=\"\" mode=\"md\" icon=\"chevron-back-outline\">\r\n      </ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title class=\"bold-font center\">{{'photo_gallery.title' | translate}} </ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <button ion-button (click)=\"savePhoto()\" class=\"button-align\">\r\n          <i class=\"fas fa-download \"></i>\r\n        </button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <section class=\"image_position\">\r\n    <ion-slides #mySlider [options]=\"slideOpts\" class=\"banner-slider\">\r\n        <ion-slide *ngFor=\"let photo of photoslist\">\r\n            <img src=\"{{photo._link}}\">\r\n        </ion-slide>\r\n      </ion-slides>\r\n  </section>  \r\n</ion-content>\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { UtilService } from 'src/providers/utils/utils.service';\r\nimport { PhotoLibrary } from '@awesome-cordova-plugins/photo-library/ngx';\r\nimport { IonSlides } from '@ionic/angular';\r\nimport { File } from '@ionic-native/file/ngx';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-show-gallery-photo',\r\n  templateUrl: './show-gallery-photo.page.html',\r\n  styleUrls: ['./show-gallery-photo.page.scss'],\r\n})\r\nexport class ShowGalleryPhotoPage implements OnInit {\r\n\r\n  @ViewChild('mySlider') slider: IonSlides;\r\n\r\n  index: any = 0;\r\n  photoslist: any;\r\n  dirName: any = \"SunAccess\";\r\n  slideOpts = {\r\n    initialSlide: 1,\r\n    slidesPerView: 1,\r\n    speed: 400,\r\n    effect: \"slide\",\r\n    paginationType: \"bullets\",\r\n    loop: true,\r\n    autoplay: {\r\n      delay: 3000,\r\n      disableOnInteraction: false,\r\n    }\r\n  };\r\n\r\n  base64Image;\r\n\r\n  constructor(public utils: UtilService, private photoLibrary: PhotoLibrary, private file: File, public translate: TranslateService) {\r\n    this.index = history.state.index;\r\n    this.photoslist = history.state.list;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  /**\r\n  * Method used to repalce 'bpp1.' with ''\r\n  * @param link - Image Url that need to be changed\r\n  */\r\n  replaceURL(link) {\r\n    // if (link != null && link != undefined) {\r\n    //   link = link.replace('bpp1.', '');\r\n    return link;\r\n    // }\r\n  }\r\n\r\n  /**\r\n     * This method is used to download the photo and save it in the local Storage\r\n     */\r\n\r\n\r\n  async savePhoto() {\r\n    let currentIndex = await this.slider.getActiveIndex() - 1;\r\n    let link = this.photoslist[currentIndex]['_link'];\r\n    // link = link.replace(\"bpp1.\", \"\");\r\n    this.utils.showProgressLoader();\r\n    this.photoLibrary.requestAuthorization({ read: true, write: true }).then((res) => {\r\n      this.photoLibrary.saveImage(link + '&ext=.jpg', this.dirName).then((res) => {\r\n        this.utils.dissmisProgressLoader();\r\n        this.utils.presentToast(this.translate.instant('save-photo.image_success_download'));\r\n        // alert('save-photo.image_success_download');\r\n      }, (error) => {\r\n        this.utils.dissmisProgressLoader();\r\n        if (error.toLowerCase() == 'retrieved asset is nil') {\r\n          // alert('save-photo.image_success_download');\r\n          this.utils.presentToast(this.translate.instant('save-photo.image_success_download'));\r\n        } else {\r\n          // alert('save-photo.file_save_fail');\r\n          this.utils.presentToast(this.translate.instant('save-photo.file_save_fail'));\r\n        }\r\n      });\r\n    }, (err) => {\r\n      this.utils.dissmisProgressLoader();\r\n      alert('save-photo.file_permission_rejected');\r\n    });\r\n  }\r\n\r\n  // }\r\n\r\n  // async getBase64FromUrl(url) {\r\n  //     const data = await fetch(url);\r\n  //     const blob = await data.blob();\r\n  //     return new Promise((resolve) => {\r\n  //       const reader = new FileReader();\r\n  //       reader.readAsDataURL(blob);\r\n  //       reader.onloadend = () => {\r\n  //         const base64data = reader.result;\r\n  //         resolve(base64data);\r\n  //       }\r\n  //     });\r\n  //   }\r\n\r\n\r\n  // async savePhoto() {\r\n  //     let currentIndex = await this.slider.getActiveIndex() - 1;\r\n  //     let link = this.photoslist[currentIndex]['_link'];\r\n  //     link = link.replace(\"bpp1.\", \"\");\r\n  //     await this.getBase64FromUrl(\"https://www.sunlifemalaysia.com/CMSPages/GetFile.aspx?guid=a89b1d88-5794-45de-8e8d-a17f415408ad\").then((result) => {\r\n  //       console.log(\"result = \" + result);\r\n  //       this.base64Image = result;\r\n  //     });\r\n  //     alert(\"this.base64Image = \" + this.base64Image)\r\n  //     this.utils.showProgressLoader();\r\n  //     let UUID = 'IMAGE_NAME_' + (new Date().getTime()).toString(16);\r\n  //     let realData = this.base64Image.split(\",\")[1];\r\n  //     let blob = this.b64toBlob(realData, 'image/jpeg');\r\n  //     this.file.checkDir(this.file.externalRootDirectory, 'DCIM').then(result => {\r\n  //       console.log('Directory exists: ' + JSON.stringify(result));\r\n  //       this.file.writeFile(this.file.externalRootDirectory + 'DCIM/', UUID + '.jpg', blob).then(res => {\r\n  //         console.log('File created success: ' + JSON.stringify(res));\r\n  //         alert('File created success: ' + JSON.stringify(res))\r\n  //         this.utils.dissmisProgressLoader();\r\n  //       }).catch(err => {\r\n  //         console.log('File created failed: ' + JSON.stringify(err));\r\n  //         alert('File created failed: ' + JSON.stringify(err))\r\n  //         this.utils.dissmisProgressLoader();\r\n  //       });\r\n  //     }).catch(err => {\r\n  //       console.log('Directory not exists: ' + JSON.stringify(err));\r\n  //       this.file.createDir(this.file.externalRootDirectory, 'DCIM', false).then(result => {\r\n  //         console.log('Directory created Success: ' + JSON.stringify(result));\r\n  //         this.file.writeFile(this.file.externalRootDirectory + 'DCIM/', UUID + '.jpg', blob).then(res => {\r\n  //           console.log('File created success: ' + JSON.stringify(res));\r\n  //           alert('File created success: ' + JSON.stringify(res))\r\n  //         }).catch(err => {\r\n  //         }).catch(err => {\r\n  //           console.log('File created failed: ' + JSON.stringify(err));\r\n  //           alert('File created failed: ' + JSON.stringify(err))\r\n\r\n  //         });\r\n  //       }).catch(err => {\r\n  //         console.log('Directory created Failed: ' + JSON.stringify(err));\r\n  //       });\r\n  //     });\r\n  //   }\r\n\r\n  //   b64toBlob(b64Data, contentType) {\r\n  //     contentType = contentType || '';\r\n  //     var sliceSize = 512;\r\n  //     var byteCharacters = atob(b64Data);\r\n  //     var byteArrays = [];\r\n\r\n  //     for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n  //       var slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n  //       var byteNumbers = new Array(slice.length);\r\n  //       for (var i = 0; i < slice.length; i++) {\r\n  //         byteNumbers[i] = slice.charCodeAt(i);\r\n  //       }\r\n\r\n  //       var byteArray = new Uint8Array(byteNumbers);\r\n\r\n  //       byteArrays.push(byteArray);\r\n  //     }\r\n\r\n  //     var blob = new Blob(byteArrays, { type: contentType });\r\n  //     return blob;\r\n  //   }\r\n\r\n  }\r\n\r\n"],"names":["RouterModule","ShowGalleryPhotoPage","routes","path","component","ShowGalleryPhotoPageRoutingModule","forChild","imports","exports","CommonModule","FormsModule","IonicModule","TranslateModule","ShowGalleryPhotoPageModule","declarations","i0","constructor","utils","photoLibrary","file","translate","initialSlide","slidesPerView","speed","effect","paginationType","loop","autoplay","delay","disableOnInteraction","index","history","state","photoslist","list","ngOnInit","replaceURL","link","savePhoto","currentIndex","slider","getActiveIndex","showProgressLoader","requestAuthorization","read","write","then","res","saveImage","dirName","dissmisProgressLoader","presentToast","instant","error","toLowerCase","err","alert","selectors","viewQuery","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}