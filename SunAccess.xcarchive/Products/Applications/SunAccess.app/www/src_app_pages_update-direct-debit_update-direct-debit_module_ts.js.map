{"version":3,"file":"src_app_pages_update-direct-debit_update-direct-debit_module_ts.js","mappings":"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","sources":["./src/app/pages/update-direct-debit/update-direct-debit-routing.module.ts","./src/app/pages/update-direct-debit/update-direct-debit.module.ts","./src/app/pages/update-direct-debit/update-direct-debit.page.ts","./src/app/pages/update-direct-debit/update-direct-debit.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { UpdateDirectDebitPage } from './update-direct-debit.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: UpdateDirectDebitPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class UpdateDirectDebitPageRoutingModule {}\r\n","import { TranslateModule } from '@ngx-translate/core';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { UpdateDirectDebitPageRoutingModule } from './update-direct-debit-routing.module';\r\n\r\nimport { UpdateDirectDebitPage } from './update-direct-debit.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    ReactiveFormsModule,\r\n    UpdateDirectDebitPageRoutingModule\r\n  ],\r\n  declarations: [UpdateDirectDebitPage]\r\n})\r\nexport class UpdateDirectDebitPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup } from '@angular/forms';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { LoggerServiceProvider } from 'src/providers/logger-service/logger-service';\r\nimport { ConfigProvider } from 'src/providers/utils/config';\r\nimport { UtilService } from 'src/providers/utils/utils.service';\r\nimport { UpdateDirectDebitService } from './updateDirectDebitService';\r\nimport { InAppBrowser, InAppBrowserOptions} from '@awesome-cordova-plugins/in-app-browser/ngx';\r\nimport * as HttpStatus from 'http-status-codes';\r\n// import { Network } from '@ionic-native/network/ngx';\r\n\r\n\r\ndeclare var eGHL: any;\r\n@Component({\r\n  selector: 'app-update-direct-debit',\r\n  templateUrl: './update-direct-debit.page.html',\r\n  styleUrls: ['./update-direct-debit.page.scss'],\r\n})\r\nexport class UpdateDirectDebitPage  {\r\n\r\n  isShowingLoader : boolean = false;\r\n  canTryAgain : boolean = false;\r\n  errorMsg :any;\r\n  updateDirectDebitForm : FormGroup;\r\n  policyList : any = [];\r\n  selectedPolicyIndex: any = 0;\r\n  selectedEncryptedPolicyId: any;\r\n  selectedPolicyId: any;\r\n  selectedPolicyOwnerName: any;\r\n  selectedPolicyOwnerEmail: any;\r\n  selectedPolicyOwnerMobileNo: any;\r\n  paymentDescription:any\r\n  CardNumberVal:any;\r\n  disclaimer_terms: boolean = true;\r\n  username : any ;\r\n  isGetMerchantInfoServiceSuccess: boolean;\r\n  merchantURL: any;\r\n  merchantReturnURL: string= \"https://bpp1.sunlifemalaysia.com/portal-ui/CUSTOMER/UpdateDirectDebitResults\";\r\n  serviceId: any;\r\n  password: any;\r\n  isUATBuild: boolean = true;\r\n  paymentSeqNo: string;\r\n  paymentSuccessResp: any;\r\n  amount: string=\"9999.00\";\r\ncurrencyCode=\"MYR\";\r\ncustIp=\"127.0.0.0\";\r\npageTimeout=780;\r\nhashValue:any;\r\n\r\n  constructor(\r\n    public fb:FormBuilder,\r\n    private utils: UtilService, public updateDirectDebitDetail : UpdateDirectDebitService,\r\n    public logger : LoggerServiceProvider, public translate:TranslateService,  private config: ConfigProvider,\r\n    private theInAppBrowser: InAppBrowser\r\n  ) {\r\n    this.updateDirectDebitForm = fb.group({\r\n      disclaimer: [{ value: true, disabled: false }],\r\n      selectPolicy: this.fb.array([])\r\n    });\r\n    this.username =this.utils.getName();\r\n    this.getPolicyList();\r\n  }\r\n\r\n  // ngOnInit() {\r\n  // }\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad UpdateDirectDebitPage');\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.config.currentPage.pageName = \"UpdateDirectDebitPage\";\r\n  }\r\n\r\n  checkboxChange(checked: boolean) {\r\n    if (checked) {\r\n      this.disclaimer_terms = true;\r\n    } else {\r\n      this.disclaimer_terms = false;\r\n    }\r\n  }\r\nshowGuideLines(){\r\n     //this.navCtrl.push(UddGuideLinesPage);\r\n}\r\ngetPolicyList(){\r\n  if(!(this.policyList.length>0)){\r\n    this.isShowingLoader = true;\r\n      if(this.utils.isDeviceOnLine()){\r\n        this.canTryAgain = false;\r\n        this.updateDirectDebitDetail.getDirectDebitPolicyList(this.utils.getUserIdentity()).then((res) => {\r\n          try {\r\n\r\n            if (res['responseJSON'] && res['responseJSON']['statusCode'] == HttpStatus.OK) {\r\n              this.policyList = res['responseJSON']['array'];\r\n              this.isShowingLoader = false;\r\n            }else{\r\n              this.isShowingLoader = false;\r\n              this.canTryAgain = true;\r\n              this.errorMsg = this.translate.instant('generic_msgs.server_err');\r\n            }\r\n          }catch (e) {\r\n            this.isShowingLoader = false;\r\n            this.canTryAgain = true;\r\n            this.logger.error(\"loginSuccess catch eror : \" + JSON.stringify(e));\r\n            this.errorMsg = this.translate.instant('generic_msgs.server_err');\r\n          }\r\n        }, (err) => {\r\n          this.isShowingLoader = false;\r\n          this.canTryAgain = true;\r\n          this.errorMsg= this.translate.instant('generic_msgs.server_err');\r\n        });\r\n      }else{\r\n        this.isShowingLoader = false;\r\n        this.canTryAgain = true;\r\n        this.errorMsg= this.translate.instant('generic_msgs.network_err');\r\n      }\r\n  }else{\r\n    this.isShowingLoader = false;\r\n    this.canTryAgain = false;\r\n  }\r\n}\r\nonChange(policyNo:string, index) {\r\n\r\n  const policyFormArray = <FormArray>this.updateDirectDebitForm.controls.selectPolicy;\r\n  policyFormArray.removeAt(0);\r\n\r\n  policyFormArray.push(new FormControl(policyNo)); //incase of checkbox select\r\n  this.selectedPolicyIndex = index;\r\n  this.selectedEncryptedPolicyId = this.policyList[this.selectedPolicyIndex][\"EncryptedPolicyNumber\"];\r\n\r\n}\r\nsubmitDirectDebitForm(){\r\n  this.logger.trace(\"POST paymnet user details --start\");\r\n  this.utils.showProgressLoader();\r\n  if(this.utils.isDeviceOnLine()){\r\n    //this.isShowingLoader = true;\r\n    this.updateDirectDebitDetail.postEMandateInfo(this.selectedEncryptedPolicyId).then((res) => {\r\n  try {\r\n\r\n        //this.isShowingLoader = false;\r\n\r\n     if (res['responseJSON'] && res['responseJSON']['statusCode'] ==  HttpStatus.CREATED) {\r\n       console.log(res['responseJSON']);\r\n          //this.paymentSeqNo = res['responseJSON']['paymentId'];\r\n          this.MakeEGHLPayment(res['responseJSON']);\r\n        } else{\r\n\r\n          this.logger.error(\"POST USER payment details : \" + JSON.stringify(res));\r\n          this.errorMsg = this.translate.instant('generic_msgs.server_err');\r\n        }\r\n      }catch (e) {\r\n        this.utils.dissmisProgressLoader();\r\n        this.isShowingLoader = false;\r\n        this.logger.error(\"POST USER payment details : \" + JSON.stringify(e));\r\n        this.errorMsg = this.translate.instant('generic_msgs.server_err');\r\n      }\r\n    }, (err) => {\r\n      this.utils.dissmisProgressLoader();\r\n      this.isShowingLoader = false;\r\n      this.logger.error(\"POST USER payment details : \" + JSON.stringify(err));\r\n      this.errorMsg = this.utils.handleServiceException(err);\r\n    });\r\n  }else{\r\n    this.isShowingLoader = false;\r\n    this.errorMsg= this.translate.instant('generic_msgs.network_err');\r\n  }\r\n\r\n}\r\nMakeEGHLPayment(paymentInputData) {\r\n\r\n  let pageContentUrl: any;\r\n  let options: InAppBrowserOptions = {\r\n    location: 'yes',//Or 'no'\r\n    hidden: 'no', //Or 'yes'\r\n    clearcache: 'yes',\r\n    clearsessioncache: 'yes',\r\n    zoom: 'yes',//Android only ,shows browser zoom controls\r\n    hardwareback: 'no',\r\n    mediaPlaybackRequiresUserAction: 'no',\r\n    shouldPauseOnSuspend: 'no', //Android only\r\n    closebuttoncaption: 'Close', //iOS only\r\n    disallowoverscroll: 'no', //iOS only\r\n    toolbar: 'yes', //iOS only\r\n    enableViewportScale: 'no', //iOS   only\r\n    allowInlineMediaPlayback: 'no',//iOS only\r\n    presentationstyle: 'pagesheet',//iOS only\r\n    fullscreen: 'yes',//Windows only ,\r\n    hideurlbar:'yes',\r\n    hidenavigationbuttons:'yes',\r\n    toolbarcolor :'#f8f8f8',\r\n    closebuttoncolor:\"#003946\"\r\n  };\r\n  let gatewayInputs = \"\";\r\n    if (paymentInputData.inputs.length > 0) {\r\n      let inputData = paymentInputData.inputs;\r\n      for (let i = 0; i < inputData.length; i++) {\r\n        gatewayInputs += '<input type=\"' + inputData[i].type + '\" name=\"' + inputData[i].name + '\" value=\"' + inputData[i].value + '\" />';\r\n      }\r\n      var pageContent =\r\n        '<html><head><script>function submitPayment(){document.eMandate.submit();}</script></head>' +\r\n        '<body onload=\"submitPayment()\"><form action=\"' + paymentInputData.submitUrl + '\"  name=\"eMandate\" method=\"post\">' +\r\n        gatewayInputs + '</form>' +\r\n        '</body></html>';\r\n      pageContentUrl = 'data:text/html;base64,' + btoa(pageContent);\r\n\r\n      let target = \"_blank\";\r\n      let browser = this.theInAppBrowser.create(pageContentUrl, target, options);\r\n      browser.on('loadstart').subscribe((params)=>{\r\n        if(params.url.includes('bpp1.sunlifemalaysia.com/')){\r\n          browser.close();\r\n        }\r\n      });\r\n      browser.on('exit').subscribe((res) => {\r\n        console.log(\"response is \"+JSON.stringify(res));\r\n        this.utils.dissmisProgressLoader();\r\n        //this.app.getRootNav().setRoot(HomePage);\r\n      }, err => {\r\n       this.utils.dissmisProgressLoader();\r\n       // this.adapterSer.ErrorcustomDialog('', 'Error Occured.');\r\n      });\r\n    } else {\r\n      console.log(JSON.stringify(paymentInputData));\r\n      this.utils.dissmisProgressLoader();\r\n      //this.adapterSer.ErrorcustomDialog('', 'Sorry, Unable to process at this moment please try after some time');\r\n    }\r\n\r\n    }\r\n    paymentSuccess() {\r\n      if (this.utils.isDeviceOnLine()) {\r\n        this.utils.showProgressLoader();\r\n\r\n\r\n        this.updateDirectDebitDetail.putEMandateResults(this.paymentSuccessResp, this.paymentSeqNo).then((res) => {\r\n          try {\r\n            this.utils.dissmisProgressLoader();\r\n            if (res['responseJSON']){\r\n              if(res['responseJSON']['statusCode'] == HttpStatus.ACCEPTED || res['responseJSON']['statusCode'] == HttpStatus.OK) {\r\n                let message = res['responseJSON']['userMessage'] || this.translate.instant('make_payment.paymentSuccessService');\r\n                this.utils.showAlert(\"\", message, false, this.alertButtons);\r\n              } else {\r\n                let message = res['responseJSON']['Message'] || this.translate.instant('make_payment.paymentSuccessService');\r\n                this.utils.showAlert(\"\", message, false, this.alertButtons);\r\n              }\r\n            }\r\n          } catch (e) {\r\n            this.utils.dissmisProgressLoader();\r\n            this.logger.error(\"loginSuccess catch eror : \" + JSON.stringify(e));\r\n            let errorMessage = this.translate.instant('make_payment.tryAgain');\r\n            this.utils.showAlert(\"\", errorMessage, false, this.alertButtons);\r\n          }\r\n        }, (err) => {\r\n          let errorMessage;\r\n          this.utils.dissmisProgressLoader();\r\n          errorMessage = this.utils.handleServiceException(err);\r\n          this.utils.showAlert(\"\", errorMessage,false, this.alertButtons);\r\n        });\r\n      } else {\r\n        this.utils.dissmisProgressLoader();\r\n        let errorMessage = this.translate.instant('generic_msgs.network_err');\r\n        this.utils.showAlert(\"\", errorMessage,false, this.alertButtons);\r\n      }\r\n    }\r\n\r\n    alertButtons = [{\r\n      text: this.translate.instant('make_payment.okBtn'),\r\n      handler: () => {\r\n\r\n        //this.navCtrl.push(PaymentAcknowledgementDDPage,{\"successdata\":this.paymentSuccessResp, animate: true, direction: 'forward' });\r\n      }\r\n    }];\r\n\r\n\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>update-direct-debit</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n\r\n</ion-content>\r\n"],"names":["RouterModule","UpdateDirectDebitPage","routes","path","component","UpdateDirectDebitPageRoutingModule","forChild","imports","exports","TranslateModule","CommonModule","FormsModule","ReactiveFormsModule","IonicModule","UpdateDirectDebitPageModule","declarations","FormControl","HttpStatus","constructor","fb","utils","updateDirectDebitDetail","logger","translate","config","theInAppBrowser","text","instant","handler","updateDirectDebitForm","group","disclaimer","value","disabled","selectPolicy","array","username","getName","getPolicyList","ionViewDidLoad","console","log","ionViewDidEnter","currentPage","pageName","checkboxChange","checked","disclaimer_terms","showGuideLines","policyList","length","isShowingLoader","isDeviceOnLine","canTryAgain","getDirectDebitPolicyList","getUserIdentity","then","res","OK","errorMsg","e","error","JSON","stringify","err","onChange","policyNo","index","policyFormArray","controls","removeAt","push","selectedPolicyIndex","selectedEncryptedPolicyId","submitDirectDebitForm","trace","showProgressLoader","postEMandateInfo","CREATED","MakeEGHLPayment","dissmisProgressLoader","handleServiceException","paymentInputData","pageContentUrl","options","location","hidden","clearcache","clearsessioncache","zoom","hardwareback","mediaPlaybackRequiresUserAction","shouldPauseOnSuspend","closebuttoncaption","disallowoverscroll","toolbar","enableViewportScale","allowInlineMediaPlayback","presentationstyle","fullscreen","hideurlbar","hidenavigationbuttons","toolbarcolor","closebuttoncolor","gatewayInputs","inputs","inputData","i","type","name","pageContent","submitUrl","btoa","target","browser","create","on","subscribe","params","url","includes","close","paymentSuccess","putEMandateResults","paymentSuccessResp","paymentSeqNo","ACCEPTED","message","showAlert","alertButtons","errorMessage","selectors","decls","vars","template","i0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}