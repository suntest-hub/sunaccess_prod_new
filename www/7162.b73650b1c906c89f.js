"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7162],{77162:(j,m,a)=>{a.r(m),a.d(m,{DashboardAfterLoginPageModule:()=>N});var h=a(36895),b=a(24006),u=a(54463),r=a(48058),d=a(64228),f=a(43485),v=a(65414),p=a(77636),t=a(98274),_=a(53025),P=a(9999),S=a(45340),x=a(38590),y=a(11481),A=a(42045),D=a(34088),T=a(27323),C=a(49756);function L(o,l){if(1&o&&(t.TgZ(0,"ion-badge",30),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.notiBadge,"")}}function w(o,l){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.passwordReminderMsg)}}const M=[{path:"",component:(()=>{class o{constructor(e,i,n,c,s,O,I,k,U,E,Y,J,R,q,V,z,F,B,H){this.activatedRoute=e,this.router=i,this.platform=n,this.utils=c,this.translate=s,this.logger=O,this.config=I,this.datePipe=k,this.translateConfig=U,this.authHandler=E,this._DomSanitizer=Y,this.iab=J,this.alertCtrl=R,this.NotificationSettingservice=q,this.menuCtrl=V,this.eMedicalCardSrvc=z,this.pushNotiService=F,this.ModalController=B,this.ToastController=H,this.userDetails={profilePicture:"assets/imgs/empty-avatar.jpg"},this.lastLoginDate=this.utils.getlastLoginDate(),this.passwordReminderMsg=this.utils.getPasswordReminderMsg(),this.showPasswordExpirationMsgFlag=this.utils.getshowPasswordReminderMsg(),this.dat=this.lastLoginDate.split("/",3),this.dat1=this.dat[1]+"/"+this.dat[0]+"/"+this.dat[2],this.lastTap=Date.now(),this.introJS=(0,p.Z)(),this.navToProfile=function(){this.router.navigate(["/profile"])},this.openDownloads=function(){this.router.navigate(["/downloads"])},this.activatedRoute.params.subscribe(g=>{console.log(g),this.comingfromWelcomeTour=g.comingfromWelcomeTour,this.comingFromLoginFlagVal=g.comingFromLogin}),this.utils.analytics("dashboardAfterLogin"),"data:image/jpeg;base64,"!=this.config.userDetails.profilePicture&&null!=this.config.userDetails.profilePicture&&"unsafe:data:image/jpeg;base64,"!=this.config.userDetails.profilePicture&&(this.userDetails.profilePicture=this._DomSanitizer.bypassSecurityTrustUrl(this.config.userDetails.profilePicture)),this.notiBadge=this.config.userInfo.unreadNoti,this.subscribedtags=this.config.userInfo.subscribedNotitags,this.name=this.utils.getName(),this.lastDate=this.transformDate(this.dat1),document.body.addEventListener("click",()=>{this.logger.trace("HomePage--document.body--start"),this.logger.log("tapped"),this.lastTap=Date.now(),this.logger.trace("HomePage--document.body--end")}),this.utils.getObservable().subscribe(g=>{"PicUpdated"===g.event&&(this.userDetails.profilePicture=this._DomSanitizer.bypassSecurityTrustUrl(g.data)),"UnreadNotiUpdated"===g.event&&(this.notiBadge=g.data)}),this.startInterval()}transformDate(e){return this.datePipe.transform(e,"dd MMM  y h:m:s")}ngOnInit(){this.comingFromLoginFlagVal&&this.getNotificationSubscriptionStatus()}ngAfterViewInit(){this.comingfromWelcomeTour&&setTimeout(()=>{var e=(0,p.Z)(),i=this.menuCtrl,n=this.utils;e.setOptions({doneLabel:"Next",hidePrev:!0,steps:[{element:document.querySelector(".dataStep1"),intro:"<h4>View and edit your profile</h4> <p>Update your details to receive the latest notifications and benefits.<p/>"},{element:document.querySelector(".dataStep2"),intro:"<h4>Your policy overview</h4> <p>View & access your policy details, status & payments.<p/>"},{element:document.querySelector(".dataStep3"),intro:"<h4>Track your claims</h4> <p>Submit a claim and view the status of your submission.<p/>"},{element:document.querySelector(".dataStep4"),intro:"<h4>Access important documents</h4> <p>Download statements and policy/contract documents.<p/>"},{element:document.querySelector(".dataStep5"),intro:"<h4>Self-services</h4> <p>Access & submit service requests digitally.<p/>"},{element:document.querySelector(".dataStep6"),intro:"<h4>Generate your E-Medical Card</h4> <p>Similar to your physical card, click here and have your digitalised medical card on-the-go.<p/>"},{element:document.querySelector(".dataStep7"),intro:"<h4>Perform your first time nomination</h4> <p>Nominate a beneficiary to receive the death benefit of your policy.<p/>"},{element:document.querySelector(".dataStep8"),intro:"<h4>Notifications</h4> <p>Check all your latest notifications here.<p/>"}]}),e.oncomplete(function(){i.open(),n.publishSomeData({event:"comingFromDashBoardAppTour",data:!0})}),e.onexit(function(){7==this._currentStep||(i.open(),n.publishSomeData({event:"comingFromServiceAppTour",data:!0}))}),e.start()},700)}getPolicyList(){this.router.navigate(["/plan-listing"])}ionViewDidEnter(){this.menuCtrl.swipeGesture(!1),this.menuCtrl.enable(!0,"custom"),this.config.currentPage.pageName="DashboardAfterLoginPage"}ionViewWillEnter(){this.utils.component.emit(v.c.DASHBOARD)}navToClaimStatusPage(){this.router.navigate(["/claims"])}getNotificationSubscriptionStatus(){this.pushNotiService.load(),this.logger.log("ionViewDidLoad DashboardAfterLoginPage"),this.NotificationSettingservice.getNotificationSettings().then(e=>{this.userSubscribed=e.responseJSON.subscribed,!0===this.userSubscribed?this.checkNotificationSubscription():this.config.userInfo.isNotificationRegistered=!1})}checkNotificationSubscription(){this.pushNotiService.CheckSubscriptionAndRegister().then(e=>{this.config.userInfo.isNotificationRegistered=!0},e=>{this.config.userInfo.isNotificationRegistered=!1})}navToSunactive(){}navToEMedicalCard(){this.utils.showProgressLoader(),this.eMedicalCardSrvc.getMedicalCardPolicyList().then(e=>{try{this.utils.dissmisProgressLoader(),console.log("policy list",e),e.responseJSON.array.length?this.router.navigate(["/e-medical-card"],{state:{policylist:e.responseJSON}}):this.showDialog("",'None of the plans are applicable for Medical Card. <p>For further info, please contact our Client Careline at <a href="tel:1300-88-5055">1300-88-5055</a> or email us at <a href="mailto:wecare@sunlifemalaysia.com" target="_blank">wecare@sunlifemalaysia.com</a>.</p>')}catch(i){this.utils.dissmisProgressLoader(),this.logger.error("loginSuccess catch eror : "+JSON.stringify(i)),this.translate.instant("generic_msgs.server_err")}},e=>{this.utils.dissmisProgressLoader(),this.utils.handleServiceException(e)})}showDialog(e,i){this.alertCtrl.create({header:e,message:i,buttons:[{text:"ok",handler:()=>{}}],backdropDismiss:!1}).then(s=>s.present())}navToENomination(){if(this.utils.isDeviceOnLine())this.utils.showProgressLoader(),this.getEnominationPath().then(e=>{try{this.platform.is("ios")?this.utils.openLink(e.responseJSON.url):this.utils.openLinkEnominationInAndroid(e.responseJSON.url),this.menuCtrl.close(),this.utils.dissmisProgressLoader()}catch(i){this.utils.dissmisProgressLoader(),this.menuCtrl.close();let n=this.translate.instant("generic_msgs.server_err");this.utils.showAlert("",n)}},e=>{this.showServiceError(e)});else{let e=this.translate.instant("generic_msgs.network_err");this.showError(e)}}getEnominationPath(){this.logger.trace("App.component--eNominationService--start");let e=new Promise((i,n)=>{try{var c=new WLResourceRequest(f.i.getEnominationlinkAdapterPath,WLResourceRequest.GET);c.setQueryParameter("params","['"+this.utils.getUserIdentity()+"','"+this.utils.getToken()+"']"),c.send().then(s=>{i(s)},s=>{this.logger.error("App.component--eNominationService Adapter calling error:"+JSON.stringify(s)),n(s)})}catch(s){n(s),this.logger.log("App.component--eNominationService adapter calling catch error:"+JSON.stringify(s))}});return this.logger.trace("App.component--eNominationService--end"),e}showServiceError(e){this.utils.dissmisProgressLoader(),this.menuCtrl.close();let i=this.utils.handleServiceException(e);this.utils.showAlert("",i)}openNotification(){this.router.navigate(["/notifications"])}navToServices(){this.router.navigate(["/service"])}startInterval(){null!=this.config.interValID&&(clearInterval(this.config.interValID),this.config.interValID=null),this.config.interValID=setInterval(()=>{this.checkSession()},this.config.CHECK_INTERVAL)}checkSession(){const e=Date.now(),c=this.lastTap+60*this.config.SESSION_TIME*1e3-e<0;clearInterval(this.config.interValID),c?(this.menuCtrl.isOpen()&&this.menuCtrl.close(),this.utils.isLoaderInDisplay&&this.utils.dissmisProgressLoader(),this.authHandler.logout(),this.config.userInfo={},this.config.userDetails={},null!=this.config.sessionTimeout&&(clearTimeout(this.config.sessionTimeout),this.config.sessionTimeout=null),null!=this.config.interValID&&(clearInterval(this.config.interValID),this.config.interValID=null),this.ModalController.dismiss(),this.ToastController.dismiss(),this.alertCtrl.dismiss(),(0,p.Z)().exit(),("ios"==this.utils.getPlatform()||"android"==this.utils.getPlatform())&&this.router.navigate(["/login-first"],{state:{animate:!0,direction:"forward",tokenExpire:!0,loadInitialLogin:!0}})):this.startInterval()}promptInstallApp(e,i){var n;e==this.config.sunactiv.source_google?n=this.config.sunactiv.googleApp_url:e==this.config.sunactiv.source_samsung&&(n=this.config.sunactiv.sumsungApp_url),this.alertCtrl.create({header:"Install App?",message:"Do you want to install "+e+" Health. In order to sync data, "+e+" Health App must be installed.",buttons:[{text:"Choose source",handler:()=>{this.router.navigate(["/SunactivPage"],{state:{registered:!0,manualUnsync:!0,source:i.source,status:i.status,avgStepMonth:i.averageStepsThisMonth,RegDate:i.registrationDate,lastSyncDate:i.lastSyncDate}})}},{text:"Agree",handler:()=>{this.iab.create(n,"_system").show()}}]}).then(s=>s.present())}showError(e){this.utils.dissmisProgressLoader(),this.utils.showAlert("",e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(r.t4),t.Y36(_.f),t.Y36(u.sK),t.Y36(P.U),t.Y36(f.i),t.Y36(h.uU),t.Y36(S.w),t.Y36(x.P),t.Y36(y.H7),t.Y36(A.i),t.Y36(r.Br),t.Y36(D.K),t.Y36(r._q),t.Y36(T.C),t.Y36(C._),t.Y36(r.IN),t.Y36(r.yF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-after-login"]],decls:64,vars:32,consts:[["mode","ios"],["color","primary",1,"toolbar"],["slot","start","auto-hide","false","color","secondary"],[1,"bold-font"],["end","",1,"header-right-btn"],["color","primary","fill","solid",1,"custom-class","dataStep8",3,"click"],["aria-hidden","true","item-left","","col-1","","text-center","",1,"fas","fa-bell"],["color","danger",4,"ngIf"],["no-bounce","",1,"app_bg2"],[1,"ion-text-center"],[1,"dataStep1"],[1,"profile-pic"],["alt","...",1,"profilePic",3,"src"],["aria-hidden","true",1,"fas","fa-edit",3,"click"],[1,"welcome_txt"],[4,"ngIf"],[1,"ion-text-center",2,"padding-left","17px","padding-right","17px","height","105px"],[1,"text_color_base","my_plan_tile","dataStep2",3,"click"],[1,"fas","fa-file-alt","tile_img"],[1,"font-label"],["text-center","",1,"text_color_base","claims_tile","dataStep3",3,"click"],[1,"fas","fa-inbox","tile_img"],["text-center","",1,"text_color_base","downloads_tile","dataStep4",3,"click"],[1,"fa","fa-download","tile_img"],["text-center","",1,"text_color_base","my_profile_tile","dataStep5",3,"click"],[1,"fas","fa-clipboard-list","tile_img"],["text-center","",1,"text_color_base","sunactiv_tile","dataStep6",3,"click"],[1,"fas","fa-address-card","tile_img"],["text-center","",1,"text_color_base","enomination_tile","dataStep7",3,"click"],[2,"height","5% !important"],["color","danger"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1),t._UZ(2,"ion-menu-button",2),t.TgZ(3,"ion-title",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"ion-buttons",4)(7,"ion-button",5),t.NdJ("click",function(){return i.openNotification()}),t._UZ(8,"i",6),t.YNc(9,L,2,1,"ion-badge",7),t.qZA()()()(),t.TgZ(10,"ion-content",8)(11,"section")(12,"ion-row",9)(13,"ion-col")(14,"div",10)(15,"div",11),t._UZ(16,"img",12),t.TgZ(17,"i",13),t.NdJ("click",function(){return i.navToProfile()}),t.qZA()(),t.TgZ(18,"div",14)(19,"p"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"p"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"p"),t._uU(26),t.qZA(),t.YNc(27,w,2,1,"p",15),t.qZA()()()(),t.TgZ(28,"ion-row",16)(29,"ion-col",17),t.NdJ("click",function(){return i.getPolicyList()}),t._UZ(30,"i",18),t.TgZ(31,"ion-label",19),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"ion-col",20),t.NdJ("click",function(){return i.navToClaimStatusPage()}),t._UZ(35,"i",21),t.TgZ(36,"ion-label",19),t._uU(37),t.ALo(38,"translate"),t.qZA()()(),t.TgZ(39,"ion-row",16)(40,"ion-col",22),t.NdJ("click",function(){return i.openDownloads()}),t._UZ(41,"i",23),t.TgZ(42,"ion-label",19),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"ion-col",24),t.NdJ("click",function(){return i.navToServices()}),t._UZ(46,"i",25),t.TgZ(47,"ion-label",19),t._uU(48),t.ALo(49,"translate"),t.qZA()()(),t.TgZ(50,"ion-row",16)(51,"ion-col",26),t.NdJ("click",function(){return i.navToEMedicalCard()}),t._UZ(52,"i",27),t.TgZ(53,"ion-label",19),t._uU(54),t.ALo(55,"translate"),t.qZA()(),t.TgZ(56,"ion-col",28),t.NdJ("click",function(){return i.navToENomination()}),t._UZ(57,"i",18),t.TgZ(58,"ion-label",19),t._uU(59),t.ALo(60,"translate"),t.qZA()()(),t.TgZ(61,"ion-row",29),t._UZ(62,"br")(63,"br"),t.qZA()()()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,14,"dashboard_after_login.title")),t.xp6(5),t.Q6J("ngIf",i.notiBadge>0),t.xp6(7),t.Q6J("src",i.userDetails.profilePicture,t.LSH),t.xp6(4),t.AsE(" ",t.lcZ(21,16,"dashboard_after_login.welcome")," ",i.name,""),t.xp6(3),t.hij(" ",t.lcZ(24,18,"dashboard_after_login.last_login_txt"),""),t.xp6(3),t.hij("",i.lastDate," SGT"),t.xp6(1),t.Q6J("ngIf","1"===i.showPasswordExpirationMsgFlag),t.xp6(5),t.Oqu(t.lcZ(33,20,"dashboard_after_login.my_plan")),t.xp6(5),t.Oqu(t.lcZ(38,22,"dashboard_after_login.claim_enquiry")),t.xp6(6),t.Oqu(t.lcZ(44,24,"dashboard_after_login.downloads")),t.xp6(5),t.Oqu(t.lcZ(49,26,"dashboard_after_login.service")),t.xp6(6),t.Oqu(t.lcZ(55,28,"dashboard_after_login.emedicalCard")),t.xp6(5),t.Oqu(t.lcZ(60,30,"dashboard_after_login.eNomination")))},dependencies:[h.O5,r.yp,r.YG,r.Sm,r.wI,r.W2,r.Gu,r.Q$,r.fG,r.Nd,r.wd,r.sr,u.X$],styles:["ion-badge[_ngcontent-%COMP%]{position:absolute;font-size:10pt;right:-5px;top:5px}ion-button[_ngcontent-%COMP%]{margin:5px;width:40px;height:40px;position:relative}ion-button.custom-class[_ngcontent-%COMP%]::part(native){overflow:visible}.item-inner[_ngcontent-%COMP%]{border-bottom:none!important}.tile_img[_ngcontent-%COMP%]{font-size:3rem}.my_plan_tile[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:5px;padding:15px;background:rgba(255,255,255,.7);border-top-left-radius:10px}.claims_tile[_ngcontent-%COMP%]{margin-bottom:5px;background:rgba(255,255,255,.7);padding:15px;border-top-right-radius:10px}.downloads_tile[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:5px;background:rgba(255,255,255,.7);padding:15px}.my_profile_tile[_ngcontent-%COMP%]{background:rgba(255,255,255,.7);padding:15px;margin-bottom:5px}.sunactiv_tile[_ngcontent-%COMP%]{margin-right:5px;padding:15px;background:rgba(255,255,255,.7);border-bottom-left-radius:10px}.enomination_tile[_ngcontent-%COMP%]{padding:15px;background:rgba(255,255,255,.7);border-bottom-right-radius:10px}.label[_ngcontent-%COMP%]{font-family:var(--ion-font-Agenda-Semibold);font-size:1.4rem;margin:5px}.welcome_txt[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-secondary);font-size:.8rem!important;line-height:15px;margin-bottom:10%}p[_ngcontent-%COMP%]{margin:5px}.welcome_txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){font-family:var(--ion-font-Agenda-Semibold)}.welcome_txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){margin-top:9px;font-size:.9rem;margin-bottom:3px;font-family:Agenda-Regular;font-weight:400}.welcome_txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){font-size:.9rem;margin-bottom:3px}.profile-pic[_ngcontent-%COMP%]{display:inline-block;position:relative;text-align:center}.profile-pic[_ngcontent-%COMP%]   .profilePic[_ngcontent-%COMP%]{margin-top:10px;border-radius:30px;width:23vh;height:23vh}.profile-pic[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:rgba(255,255,255,.6);--border-radius: 50%;bottom:-8px;font-size:18px;padding:10px;position:absolute;right:-10px}.notiBadge[_ngcontent-%COMP%]{border-radius:38px;color:#f4f4f4;--ion-background-color: #e13838;margin-top:-8px;margin-left:-5px;padding:2px 6px;text-align:center;display:inline-block;min-width:10px;font-weight:700;line-height:1;white-space:nowrap;vertical-align:baseline}.badgeIcon[_ngcontent-%COMP%]{font-size:22px;font-family:bolder}.NoUnread[_ngcontent-%COMP%]{margin-right:14px!important}.font-label[_ngcontent-%COMP%]{display:block;font-family:var(--ion-font-Agenda-Semibold);font-size:.9rem}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(M),d.Bz]}),o})(),N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,b.u5,r.Pc,u.aw,Z]}),o})()}}]);