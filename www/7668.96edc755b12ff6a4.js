"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7668],{3666:(G,h,o)=>{o.r(h),o.d(h,{PaymentUserDetailsPageModule:()=>E});var p=o(54463),g=o(36895),i=o(24006),r=o(48058),u=o(64228),y=o(43485),d=o(22727),e=o(98274),_=o(45340),f=o(9999),P=o(53025),U=o(52991);function D(t,a){1&t&&(e.TgZ(0,"section",13),e._UZ(1,"ion-spinner",14),e.qZA())}const x=function(t,a){return{sucess:t,fail:a}};function v(t,a){if(1&t&&(e.TgZ(0,"section",15)(1,"span"),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.Q6J("ngClass",e.WLB(2,x,n.isSuccess,!n.isSuccess)),e.xp6(2),e.Oqu(n.errorMsg)}}function Z(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"ion-button",18),e.NdJ("click",function(){e.CHM(n);const m=e.oxw(2);return e.KtG(m.tryAgain())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"generic_msgs.try_again")))}function b(t,a){if(1&t&&(e.TgZ(0,"section",16)(1,"span"),e._uU(2),e.qZA(),e.YNc(3,Z,3,3,"ion-button",17),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.errorMsg),e.xp6(1),e.Q6J("ngIf",n.canTryAgain)}}function N(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_contactNumber")))}function O(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_contactLength_req")))}function A(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_contactLength_req")))}function T(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_contactLength_req")))}function S(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_emailReq")))}function C(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_emailValidation")))}function L(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_premiumAmtReq")))}function M(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_premiumLength_req")))}function q(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_premiumPattern_req")))}function F(t,a){1&t&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"payment_usrDetails.err_premiumPattern_req")))}function w(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",19)(1,"form",20)(2,"p",21),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"ion-item",22),e._UZ(6,"ion-input",23),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"p",21),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"ion-item",22),e._UZ(12,"ion-input",24),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"p",25),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"span",26),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"ion-item",22),e._UZ(20,"ion-input",27,28),e.ALo(22,"translate"),e.qZA(),e.YNc(23,N,4,3,"div",29),e.YNc(24,O,4,3,"div",29),e.YNc(25,A,4,3,"div",29),e.YNc(26,T,4,3,"div",29),e.TgZ(27,"p",21),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"ion-item",22),e._UZ(31,"ion-input",30),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"p",25),e._uU(34),e.ALo(35,"translate"),e.TgZ(36,"span",26),e._uU(37,"*"),e.qZA()(),e.TgZ(38,"ion-item",22),e._UZ(39,"ion-input",31),e.ALo(40,"translate"),e.qZA(),e.YNc(41,S,4,3,"div",29),e.YNc(42,C,4,3,"div",29),e.TgZ(43,"p",25),e._uU(44),e.ALo(45,"translate"),e.TgZ(46,"span",26),e._uU(47,"*"),e.qZA()(),e.TgZ(48,"ion-item",22),e._UZ(49,"ion-input",32),e.ALo(50,"translate"),e.qZA(),e.YNc(51,L,4,3,"div",29),e.YNc(52,M,4,3,"div",29),e.YNc(53,q,4,3,"div",29),e.YNc(54,F,4,3,"div",29),e.TgZ(55,"ion-row",33)(56,"ion-button",34),e.NdJ("click",function(){e.CHM(n);const m=e.oxw();return e.KtG(m.getPaymentId())}),e._uU(57),e.ALo(58,"translate"),e.qZA()()()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("formGroup",n.paymentUserDetailsForm),e.xp6(2),e.Oqu(e.lcZ(4,26,"payment_usrDetails.policyNumber")),e.xp6(3),e.s9C("placeholder",e.lcZ(7,28,"payment_usrDetails.policyNumber")),e.xp6(3),e.Oqu(e.lcZ(10,30,"payment_usrDetails.policyOwner")),e.xp6(3),e.s9C("placeholder",e.lcZ(13,32,"payment_usrDetails.policyOwner")),e.xp6(3),e.Oqu(e.lcZ(16,34,"payment_usrDetails.contactNumber")),e.xp6(5),e.s9C("placeholder",e.lcZ(22,36,"payment_usrDetails.contactNumber")),e.xp6(3),e.Q6J("ngIf",n.paymentUserDetailsForm.get("contactNumber").hasError("required")&&n.paymentUserDetailsForm.get("contactNumber").touched),e.xp6(1),e.Q6J("ngIf",n.paymentUserDetailsForm.get("contactNumber").hasError("minlength")&&n.paymentUserDetailsForm.get("contactNumber").touched),e.xp6(1),e.Q6J("ngIf",n.paymentUserDetailsForm.get("contactNumber").hasError("validateNonZeroVal")&&!n.paymentUserDetailsForm.get("contactNumber").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.paymentUserDetailsForm.get("contactNumber").hasError("pattern")&&n.paymentUserDetailsForm.get("contactNumber").touched&&!n.paymentUserDetailsForm.get("contactNumber").hasError("minlength")),e.xp6(2),e.Oqu(e.lcZ(29,38,"payment_usrDetails.planName")),e.xp6(3),e.s9C("placeholder",e.lcZ(32,40,"payment_usrDetails.planName")),e.xp6(3),e.Oqu(e.lcZ(35,42,"payment_usrDetails.email")),e.xp6(5),e.s9C("placeholder",e.lcZ(40,44,"payment_usrDetails.email")),e.xp6(2),e.Q6J("ngIf",n.paymentUserDetailsForm.get("email").hasError("required")&&n.paymentUserDetailsForm.get("email").touched),e.xp6(1),e.Q6J("ngIf",!n.paymentUserDetailsForm.get("email").hasError("required")&&n.paymentUserDetailsForm.get("email").hasError("pattern")&&n.paymentUserDetailsForm.get("email").touched),e.xp6(2),e.Oqu(e.lcZ(45,46,"payment_usrDetails.premiumAmount")),e.xp6(5),e.s9C("placeholder",e.lcZ(50,48,"payment_usrDetails.premiumAmount")),e.Q6J("disabled",n.disabledPremium),e.xp6(2),e.Q6J("ngIf",n.paymentUserDetailsForm.get("premium").hasError("required")&&n.paymentUserDetailsForm.get("premium").touched),e.xp6(1),e.Q6J("ngIf",n.paymentUserDetailsForm.get("premium").hasError("minlength")&&n.paymentUserDetailsForm.get("premium").touched),e.xp6(1),e.Q6J("ngIf",n.paymentUserDetailsForm.get("premium").hasError("pattern")&&n.paymentUserDetailsForm.get("premium").touched&&!n.paymentUserDetailsForm.get("premium").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.paymentUserDetailsForm.get("premium").hasError("maxlength")&&n.paymentUserDetailsForm.get("premium").touched&&!n.paymentUserDetailsForm.get("premium").hasError("pattern")),e.xp6(2),e.Q6J("disabled",!n.paymentUserDetailsForm.valid),e.xp6(1),e.Oqu(e.lcZ(58,50,"submit"))}}const I=function(t,a){return{"bg-conventional":t,"bg-takaful":a}},J=[{path:"",component:(()=>{class t{constructor(n,s,m,l,c,Y,Q){this.translateConfigService=n,this.translate=s,this.logger=m,this.utils=l,this.getPamentUsrDetails=c,this.config=Y,this.router=Q,this.isShowingLoader=!1,this.canTryAgain=!1,this.isSuccess=!1,this.selectedLanguage=this.translateConfigService.getDefaultLanguage(),this.translateConfigService.setLanguage("en"),this.encryptedPolicyNo=history.state.encryptedPlNo,this.policyNo=history.state.polNo,this.selectedPlanType=history.state.planType,this.duePayment=history.state.duePayment;let z=parseFloat(this.duePayment);this.duePayment>1&&(this.duePayment=z.toFixed(2),this.disabledPremium=!0)}ngOnInit(){let n=y.i.EMAIL_PATTERN;this.paymentUserDetailsForm=new i.cw({contactNumber:new i.NI("",[i.kI.required,i.kI.minLength(8),this.utils.validateNonZeroVal,i.kI.pattern("[0-9]*")]),policyNumber:new i.NI({value:"",disabled:!0}),policyOwner:new i.NI({value:"",disabled:!0}),planName:new i.NI({value:"",disabled:!0}),email:new i.NI("",[i.kI.required,i.kI.pattern(n)]),premium:new i.NI("",[i.kI.required,i.kI.minLength(1),i.kI.maxLength(17),i.kI.pattern("[0-9.]*")])}),this.getPaymentUserDetails()}getPaymentUserDetails(){this.utils.isDeviceOnLine()?(this.isShowingLoader=!0,this.logger.trace("USer Details--getPaymentUserDetails--start"),this.getPamentUsrDetails.getPaymentUserDetails(this.encryptedPolicyNo).then(n=>{try{this.isShowingLoader=!1,n.responseJSON&&n.responseJSON.statusCode==d.OK?(this.isGetPaymnetUserDetailsServiceSuccess=!0,this.paymentUserDetailsForm.controls.policyNumber.setValue(this.policyNo),this.paymentUserDetailsForm.controls.policyOwner.setValue(n.responseJSON.name),this.paymentUserDetailsForm.controls.contactNumber.setValue(n.responseJSON.mobile),this.paymentUserDetailsForm.controls.planName.setValue(n.responseJSON.plan),this.paymentUserDetailsForm.controls.email.setValue(n.responseJSON.email)):(this.canTryAgain=!0,this.isGetPaymnetUserDetailsServiceSuccess=!1,this.errorMsg=this.translate.instant("generic_msgs.server_err"),this.logger.error("error occured: User Deails--getPaymentUserDetails "+JSON.stringify(n))),this.paymentUserDetailsForm.controls.premium.setValue(this.duePayment)}catch(s){this.isShowingLoader=!1,this.canTryAgain=!0,this.isGetPaymnetUserDetailsServiceSuccess=!1,this.logger.error("User Deails--getPaymentUserDetails  catch eror : "+JSON.stringify(s)),this.errorMsg=this.translate.instant("generic_msgs.server_err")}},n=>{this.isShowingLoader=!1,this.canTryAgain=!1,this.isGetPaymnetUserDetailsServiceSuccess=!1,this.logger.error("User Deails--getPaymentUserDetails  catch eror : "+JSON.stringify(n)),this.errorMsg=this.utils.handleServiceException(n)})):(this.isShowingLoader=!1,this.canTryAgain=!0,this.isGetPaymnetUserDetailsServiceSuccess=!1,this.errorMsg=this.translate.instant("generic_msgs.network_err"))}getPaymentId(){if(this.paymentUserDetailsForm.valid){this.logger.trace("POST paymnet user details --start"),this.utils.showProgressLoader();let n=this.paymentUserDetailsForm.controls.premium.value,s=this.paymentUserDetailsForm.controls.email.value,m=this.paymentUserDetailsForm.controls.contactNumber.value;this.utils.isDeviceOnLine()?(this.isShowingLoader=!0,this.getPamentUsrDetails.postPaymentUserDetails(this.encryptedPolicyNo,n,s,m).then(l=>{try{this.utils.dissmisProgressLoader(),this.isShowingLoader=!1,l.responseJSON.statusCode==d.oo||l.responseJSON.statusCode==d.OK?(this.paymentSeqNo=l.responseJSON.paymentId,this.isSuccess=!0,this.paymentconfirm()):(this.logger.error("POST USER payment details : "+JSON.stringify(l)),this.errorMsg=this.translate.instant("generic_msgs.server_err"),this.isSuccess=!1)}catch(c){this.utils.dissmisProgressLoader(),this.isShowingLoader=!1,this.isSuccess=!1,this.logger.error("POST USER payment details : "+JSON.stringify(c)),this.errorMsg=this.translate.instant("generic_msgs.server_err")}},l=>{this.utils.dissmisProgressLoader(),this.isShowingLoader=!1,this.isSuccess=!1,this.logger.error("POST USER payment details : "+JSON.stringify(l)),this.errorMsg=this.utils.handleServiceException(l)})):(this.isShowingLoader=!1,this.isSuccess=!1,this.errorMsg=this.translate.instant("generic_msgs.network_err"))}}paymentconfirm(){this.router.navigate(["payment-confirmation"],{state:{planNamed:this.paymentUserDetailsForm.controls.planName.value,policyOwnerd:this.paymentUserDetailsForm.controls.policyOwner.value,policyNumberd:this.policyNo,contactNumberd:this.paymentUserDetailsForm.controls.contactNumber.value,premiumd:this.paymentUserDetailsForm.controls.premium.value,emaild:this.paymentUserDetailsForm.controls.email.value,paysno:this.paymentSeqNo,encryptedPlNo:this.encryptedPolicyNo,planType:this.selectedPlanType}})}tryAgain(){this.isGetPaymnetUserDetailsServiceSuccess||this.getPaymentUserDetails()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(_.w),e.Y36(p.sK),e.Y36(f.U),e.Y36(P.f),e.Y36(U.O),e.Y36(y.i),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-payment-user-details"]],decls:17,vars:14,consts:[["mode","ios"],["color","primary",2,"border-bottom","3px solid white"],["slot","start"],["text","","icon","chevron-back-outline",2,"padding-left","15px","font-size","0.7rem"],[1,"bold-font"],["color","primary",1,"tabs"],[2,"margin-bottom","5px",3,"ngClass"],[1,"sub-header"],["no-bounce","",1,"app_bg1","text_color_base","padding_15","ion-padding"],["class","spinnersection ion-text-center",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","errorMsgSection",4,"ngIf"],["class","white_container_border_radius text_color_base padding_15",4,"ngIf"],[1,"spinnersection","ion-text-center"],["name","lines-sharp-small",2,"height","98%"],[3,"ngClass"],[1,"errorMsgSection"],["style","--background: white;",3,"click",4,"ngIf"],[2,"--background","white",3,"click"],[1,"white_container_border_radius","text_color_base","padding_15"],[3,"formGroup"],["position","stacked",1,"heading",2,"color","#999 !important"],["lines","none",1,"border"],["disabled","true","formControlName","policyNumber",1,"darkInputText",3,"placeholder"],["disabled","true","formControlName","policyOwner",1,"darkInputText",3,"placeholder"],["position","stacked",1,"heading"],[1,"mandatory_star"],["formControlName","contactNumber","type","tel","restrict-input","","restrictInput","number","amaxlength","20",3,"placeholder"],["contactNumberLabel",""],["class","errPosition",4,"ngIf"],["disabled","true","formControlName","planName",1,"darkInputText",3,"placeholder"],["formControlName","email","type","email",3,"placeholder"],["formControlName","premium","type","text",3,"placeholder","disabled"],[1,"ion-text-center",2,"margin-top","10px"],[1,"btn_center",3,"disabled","click"],[1,"errPosition"],[1,"mandatory_star","fail"]],template:function(n,s){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-back-button",3),e.qZA(),e.TgZ(4,"ion-title",4),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"ion-toolbar",5)(8,"ion-row",6)(9,"ion-label",7),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"ion-content",8),e.YNc(13,D,2,0,"section",9),e.YNc(14,v,3,5,"section",10),e.YNc(15,b,4,2,"section",11),e.YNc(16,w,59,52,"div",12),e.qZA()),2&n&&(e.xp6(5),e.hij("",e.lcZ(6,7,"payment_usrDetails.title")," "),e.xp6(3),e.Q6J("ngClass",e.WLB(11,I,"Conventional"===s.selectedPlanType,"Conventional"!==s.selectedPlanType)),e.xp6(2),e.Oqu(e.lcZ(11,9,"payment_usrDetails.sub_title")),e.xp6(3),e.Q6J("ngIf",s.isShowingLoader),e.xp6(1),e.Q6J("ngIf",s.errorMsg&&!s.canTryAgain&&!s.isShowingLoader),e.xp6(1),e.Q6J("ngIf",s.canTryAgain&&!s.isShowingLoader),e.xp6(1),e.Q6J("ngIf",!s.canTryAgain&&!s.isShowingLoader))},dependencies:[g.mk,g.O5,i._Y,i.JJ,i.JL,r.oU,r.YG,r.Sm,r.W2,r.Gu,r.pK,r.Ie,r.Q$,r.Nd,r.PQ,r.wd,r.sr,r.j9,r.cs,i.sg,i.u,p.X$],styles:[".app_bg1[_ngcontent-%COMP%]{--background: url(register_bg.35962209e77bb744.jpg) no-repeat center center / cover;background-size:cover;background-repeat:no-repeat;height:100%;background-position:bottom}.sub-header[_ngcontent-%COMP%]{color:#fff;padding:10px 25px!important;margin:0!important;font-size:1rem!important;font-family:Agenda-Regular}.tabs[_ngcontent-%COMP%]{border-top:3px solid color white;--padding-top: -4px;--padding-start: -4px;--padding-end: -4px;--min-height: 44px}.white_container_border_radius[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.7)!important;border-radius:15px!important}.text_color_base[_ngcontent-%COMP%]{color:--ion-color-secondary!important}.sucess[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002d3d!important}.fail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red!important}.sucess[_ngcontent-%COMP%], .fail[_ngcontent-%COMP%]{text-align:start!important}.item[_ngcontent-%COMP%]{padding-left:0;background:transparent}.item[_ngcontent-%COMP%]   .item-input.ng-valid.item-input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%], .item.item-input.ng-valid.input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%]{border-bottom-color:none!important;box-shadow:none!important}.item[_ngcontent-%COMP%]   .item-datetime.ng-valid.item-datetime-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-datetime-has-focus)   .item-inner[_ngcontent-%COMP%], .item.item-datetime.ng-valid.input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-datetime-has-focus)   .item-inner[_ngcontent-%COMP%]{border-bottom-color:none!important;box-shadow:none!important}.item-inner[_ngcontent-%COMP%]{padding-right:0!important;border-bottom:none!important}.input[_ngcontent-%COMP%]{border:1px solid #eee;padding:3px 15px;background:white;font-size:1.4rem}.label[_ngcontent-%COMP%]{font-size:1.5rem!important;font-weight:400;margin-bottom:5px!important}p[_ngcontent-%COMP%]{font-size:1.3rem}.italic_font[_ngcontent-%COMP%]{font-style:italic;margin:7px 0}.heading[_ngcontent-%COMP%]{font-family:var(--ion-font-agenda-semibold);color:#002d3d!important}.darkInputText[_ngcontent-%COMP%]{color:#000;font-weight:700}.btn_center[_ngcontent-%COMP%]{text-transform:capitalize;--background: #002d3d !important;color:#fff;font-size:1rem;--border-radius: 10px;min-height:40px;width:100%!important;font-family:Agenda-Regular!important}.spinnersection[_ngcontent-%COMP%]{display:block;flex-direction:column;justify-content:center;align-items:center;font-size:1.3rem;height:98%}.mandatory_star[_ngcontent-%COMP%]{color:red}.padding_15[_ngcontent-%COMP%]{padding:15px!important;margin-top:15px}p[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;font-size:.9rem}.errPosition[_ngcontent-%COMP%]{margin-top:4px}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(J),u.Bz]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,i.u5,r.Pc,p.aw,i.UX,k]}),t})()}}]);