"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8802],{28802:(z,h,i)=>{i.r(h),i.d(h,{LoginPageModule:()=>k});var f=i(36895),g=i(24006),r=i(48058),p=i(64228),P=i(15861),O=i(22727),b=i(97716),e=i(98274),v=i(38590),S=i(43485),_=i(53025),x=i(9999),m=i(54463),C=i(61390),N=i(15342),J=i(85059),M=i(6615);function L(n,c){1&n&&(e.TgZ(0,"div",29)(1,"span",30),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Login.password_req")))}function w(n,c){1&n&&(e.TgZ(0,"div",29)(1,"span",30),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Login.passwordLength_req")))}const y=[{path:"",component:(()=>{class n{constructor(t,o,a,s,l,d,u,F,Z,D,T,A){this.router=t,this.formBuilder=o,this.authHandler=a,this.config=s,this.utils=l,this.logger=d,this.translate=u,this.loginService=F,this.jsonStore=Z,this.popOverCtrl=D,this.profileService=T,this.mediaReleaseService=A,this.login_terms=!1,this.secureWordImage="",this.str1="six",this.loginForm=this.formBuilder.group({password:["",[g.kI.required,g.kI.minLength(8)]],secureWordCheck:[!1,{value:!1,disabled:!1}]}),this.userIdFromfirstLogin=history.state.usernameId.usernameFromFirstLogin,this.secureKey="8a65e2905ac3db54c60d52a764854061",this.secureIV="c815258cfc4a02f2",this.authHandler.authInit()}ngOnInit(){this.login_terms=!1,this.secureWordImage=this.config.secureWordImage,this.loginForm.controls.password.disable()}checkboxChange(t){t.detail.checked?(this.login_terms=!0,this.loginForm.controls.password.enable()):(this.login_terms=!1,this.loginForm.controls.password.disable())}loginUser(){if(this.loginForm.controls.password.valid&&this.loginForm.controls.secureWordCheck.value){let l=this.utils.getDeviceId();var t=this.userIdFromfirstLogin,o=this.loginForm.controls.password.value.trim(),a=t.toUpperCase(),s=this.utils.aesEncrypt(o=a+o,this.secureKey,this.secureIV);this.uNametoStore=this.utils.aesEncrypt(t,this.secureKey,this.secureIV),this.pwdtoStore=this.chunk(s,2).join("$@"),console.log("this.pswrdtostore",this.pwdtoStore),this.userLoginId=t,this.utils.showProgressLoader(),this.logger.log("uuid "+l),this.loginService.userLogin(t,s,l).then(d=>{this.loginSuccess(d)},d=>{this.utils.dissmisProgressLoader();let u=this.utils.handleServiceException(d);this.utils.showAlert("",u)})}else this.logger.trace("loginPage--Form not valid--end")}chunk(t,o){var s,a=[],l=t.length;for(s=0;s<l;s+=o)a.push(t.substr(s,o));return a}loginSuccess(t){this.logger.trace("loginPage--loginSuccess--start"),this.logger.debug("loginSuccess-"+t);try{t.responseJSON&&t.responseJSON.statusCode==O.OK?(this.config.userInfo.encryptedUserId=t.responseJSON.encrypted_user_id,this.config.userInfo.token=t.responseJSON.token_type+" "+t.responseJSON.access_token,"YES"==t.responseJSON.force_change_password.toUpperCase()?this.config.userInfo.forceChangePassword=t.responseJSON.force_change_password:(this.config.userInfo.expiresIn=t.responseJSON.expires_in,this.config.userInfo.userId=t.responseJSON.userId,this.config.userInfo.name=t.responseJSON.name,this.config.userInfo.email=t.responseJSON.email,this.config.userInfo.identityNumber=t.responseJSON.identity_number,this.config.userInfo.contactNumber=t.responseJSON.contact_number,this.config.userInfo.role=t.responseJSON.role,this.config.userInfo.forceChangeSecureWord=t.responseJSON.force_secure_phrase,this.config.userInfo.lastLoginDate=t.responseJSON.last_login_date,this.config.userInfo.issued=t.responseJSON.issued,this.config.userInfo.expires=t.responseJSON.expires,this.config.userInfo.unreadNoti=t.responseJSON.unread_notifications,this.config.userInfo.notification_subs_prompt=t.responseJSON.notification_subscription_prompt,this.config.userInfo.subscribedNotitags=t.responseJSON.notification_subscriptions,this.config.userInfo.showPasswordExpirationMsgFlag=t.responseJSON.password_change_reminder,this.config.userInfo.passwordReminderMsg=t.responseJSON.password_reminder_message,this.refreshToken=t.responseJSON.refresh_token.trim(),this.config.userInfo.maskedContactNumber=t.responseJSON.contact_number.replace(/\d(?=\d{4})/g,"*"),this.jsonStore.addDataToJsonStore(this.jsonStore.collectionNames.userDetails,{id:this.uNametoStore,token:this.pwdtoStore}),this.jsonStore.addDataToJsonStore(this.jsonStore.collectionNames.refreshToken,{refreshToken:this.refreshToken}),null!=this.config.sessionTimeout&&(clearTimeout(this.config.sessionTimeout),this.config.sessionTimeout=null),this.getProfileDetails())):(this.utils.dissmisProgressLoader(),this.utils.showAlert("",t.responseJSON.error_description))}catch(o){this.utils.dissmisProgressLoader(),this.logger.error("loginSuccess catch eror : "+JSON.stringify(o))}this.logger.trace("loginPage--loginSuccess--end")}getProfileDetails(){this.profileService.getProfileDetails().then(t=>{try{if(t.responseJSON&&t.responseJSON.statusCode==O.OK)if(this.config.userDetails.name=t.responseJSON.name,this.config.userDetails.birthDate=t.responseJSON.birthDate.trim(),this.config.userDetails.nationality=t.responseJSON.nationality.trim(),this.config.userDetails.race=t.responseJSON.race.trim(),this.config.userDetails.maritalStatus=t.responseJSON.maritalStatus.trim(),this.config.userDetails.addressField1=t.responseJSON.addressField1.trim(),this.config.userDetails.addressField2=t.responseJSON.addressField2.trim(),this.config.userDetails.addressField3=t.responseJSON.addressField3.trim(),this.config.userDetails.addressField4=t.responseJSON.addressField4.trim(),this.config.userDetails.addressField5=t.responseJSON.addressField5.trim(),this.config.userDetails.email=t.responseJSON.email.trim(),this.config.userDetails.homePhone=t.responseJSON.homePhone.trim(),this.config.userDetails.mobilePhone=t.responseJSON.mobilePhone.trim(),this.config.userDetails.officePhone=t.responseJSON.officePhone.trim(),this.config.userDetails.identityNumber=t.responseJSON.identityNo.trim(),this.config.userDetails.profilePicture="data:image/jpeg;base64,"+t.responseJSON.profilePicture,1==this.config.userInfo.forceChangeSecureWord)this.utils.dissmisProgressLoader(),this.router.navigate(["/update-secure-word"],{state:{animate:!0,direction:"forward",gotoDashboard:"true"}});else{this.utils.dissmisProgressLoader();let o={comingFromLogin:!0};"true"==localStorage.getItem("welomeTour")?this.router.navigate(["/dashboard-after-login"],{state:{animate:!0,direction:"forward",comingFromLoginFlag:o}}):this.router.navigate(["/welcome-tour"],{state:{animate:!0,direction:"forward",comingFromLoginFlag:o}})}}catch(o){this.utils.dissmisProgressLoader(),this.logger.error("loginSuccess catch eror : "+JSON.stringify(o))}},t=>{this.utils.dissmisProgressLoader();let o=this.utils.handleServiceException(t);this.utils.presentToast(o),this.router.navigate(["/login-first"],{state:{animate:!0,direction:"forward"}})})}openPopup(t){var o=this;return(0,P.Z)(function*(){yield(yield o.popOverCtrl.create({component:b.j,event:t,componentProps:{msg:o.str1},cssClass:"custom-popover"})).present()})()}forgotPassword(){this.router.navigate(["/forgot-password"],{state:{usernameId:this.userIdFromfirstLogin}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.F0),e.Y36(g.qu),e.Y36(v.P),e.Y36(S.i),e.Y36(_.f),e.Y36(x.U),e.Y36(m.sK),e.Y36(C.r),e.Y36(N.D),e.Y36(r.Dh),e.Y36(J.y),e.Y36(M.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:46,vars:27,consts:[["mode","ios"],["color","primary"],["slot","start"],["text","","icon","chevron-back-outline",2,"padding-left","15px","font-size","0.7rem"],[1,"bold-font"],["ion-padding","","forceOverscroll","false",1,"app_bg1","text_color_base"],[1,"UserimgDiv"],[1,"welcome_txt"],[2,"margin-top","-5%"],[1,"margin_bottom",3,"formGroup"],[1,"white_container_border_radius","formPadding"],[1,"marg-area","secondLoginDiv"],["lines","none",1,"margin-bottom"],[1,"row","SecurePhrace_div"],["onError","this.src='assets/imgs/placeholder-image.png';","alt","...",1,"SecurePhrace_Img",3,"src"],[1,"secureTextDescr"],["lines","none",2,"--ripple-color","transparent","--background-hover","transparent"],[2,"width","100%","align-items","center","margin-top","10px"],["size","1"],["mode","md","formControlName","secureWordCheck",1,"margin_top_bottom_auto",3,"checked","ionChange"],["size","10"],[2,"font-family","Agenda-Light","font-size","1rem"],["src","../../../assets/imgs/circle-question-solid.svg","alt","...",2,"width","18px","margin-left","-5px","max-width","150%",3,"click"],["lines","none",1,"border",2,"margin-top","-10px"],["blockpaste","","formControlName","password","autocomplete","off","clearOnEdit","false","type","password",2,"font-size","1rem","font-family","Agenda-Regular",3,"placeholder"],["style","font-size:0.9rem; font-family:Agenda-Regular",4,"ngIf"],[1,"btn_center",3,"disabled","click"],[1,"login_link"],[2,"font-size","1.1rem","font-family","Agenda-Regular",3,"click"],[2,"font-size","0.9rem","font-family","Agenda-Regular"],[1,"fail"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-back-button",3),e.qZA(),e.TgZ(4,"ion-title",4),e._uU(5,"Login"),e.qZA()()(),e.TgZ(6,"ion-content",5)(7,"div",6)(8,"p",7),e._uU(9),e.ALo(10,"translate"),e._UZ(11,"br"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",8)(15,"form",9)(16,"div",10)(17,"div",11)(18,"ion-item",12)(19,"div",13),e._UZ(20,"img",14),e.qZA()(),e.TgZ(21,"ion-label",15),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"ion-item",16)(25,"ion-row",17)(26,"ion-col",18)(27,"ion-checkbox",19),e.NdJ("ionChange",function(s){return o.checkboxChange(s)}),e.qZA()(),e.TgZ(28,"ion-col",20)(29,"ion-label",21),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"ion-col",18)(33,"img",22),e.NdJ("click",function(s){return o.openPopup(s)}),e.qZA()()()(),e.TgZ(34,"ion-item",23),e._UZ(35,"ion-input",24),e.ALo(36,"translate"),e.qZA(),e.YNc(37,L,4,3,"div",25),e.YNc(38,w,4,3,"div",25),e.TgZ(39,"ion-button",26),e.NdJ("click",function(){return o.loginUser()}),e._uU(40),e.ALo(41,"translate"),e.qZA()()()(),e.TgZ(42,"div",27)(43,"span",28),e.NdJ("click",function(){return o.forgotPassword()}),e._uU(44),e.ALo(45,"translate"),e.qZA()()()()),2&t&&(e.xp6(9),e.Oqu(e.lcZ(10,13,"welcome")),e.xp6(3),e.Oqu(e.lcZ(13,15,"sunacces")),e.xp6(3),e.Q6J("formGroup",o.loginForm),e.xp6(5),e.Q6J("src",o.secureWordImage,e.LSH),e.xp6(2),e.hij("",e.lcZ(23,17,"secureWord_image_description")," "),e.xp6(5),e.Q6J("checked",o.login_terms),e.xp6(3),e.Oqu(e.lcZ(31,19,"secureWord_image_accept")),e.xp6(5),e.s9C("placeholder",e.lcZ(36,21,"password")),e.xp6(2),e.Q6J("ngIf",o.loginForm.get("password").hasError("required")&&o.loginForm.get("password").dirty),e.xp6(1),e.Q6J("ngIf",o.loginForm.get("password").hasError("minlength")&&o.loginForm.get("password").dirty),e.xp6(1),e.Q6J("disabled",!o.loginForm.valid||!o.login_terms),e.xp6(1),e.Oqu(e.lcZ(41,23,"login")),e.xp6(4),e.hij("",e.lcZ(45,25,"forgotpassword"),"?"))},dependencies:[f.O5,g._Y,g.JJ,g.JL,r.oU,r.YG,r.Sm,r.nz,r.wI,r.W2,r.Gu,r.pK,r.Ie,r.Q$,r.Nd,r.wd,r.sr,r.w,r.j9,r.cs,g.sg,g.u,m.X$],styles:[".app_bg1[_ngcontent-%COMP%]{--background: url(register_bg.35962209e77bb744.jpg) no-repeat center center / cover;background-size:cover;background-repeat:no-repeat;height:100%;background-position:bottom}.list-header[_ngcontent-%COMP%]{margin-bottom:0!important}.item[_ngcontent-%COMP%]{padding-left:0;--background: transparent;--background-activated: none !important}.border[_ngcontent-%COMP%]{--border: 1px solid #e0e0e0;margin-bottom:10px}.item[_ngcontent-%COMP%]   .item-input.ng-valid.item-input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%], .item.item-input.ng-valid.input-has-value[_ngcontent-%COMP%]:not(.input-has-focus):not(.item-input-has-focus)   .item-inner[_ngcontent-%COMP%]{border-bottom-color:none!important;box-shadow:none!important}.item-inner[_ngcontent-%COMP%]{padding-right:0!important;border-bottom:none!important}.input[_ngcontent-%COMP%]{--border: 1px solid #eee;background:white;font-size:1.4rem}.label[_ngcontent-%COMP%]{font-size:1.7rem!important;color:#002d3d!important;white-space:pre-line}.welcome_txt[_ngcontent-%COMP%]{text-align:center;color:#002d3d;font-size:2rem!important;line-height:35px;font-family:Agenda-Regular;margin-top:15%!important}.item-inner[_ngcontent-%COMP%]{border-bottom:none!important}.input[_ngcontent-%COMP%]{border:1px solid #eee;margin:0;font-size:1.4rem!important}.marg-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:medium none;padding:0 15px;width:100%;border-bottom:0px solid #e5e5e5}.item-md.item-block[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{padding-right:0}.formPadding[_ngcontent-%COMP%]{margin-top:-20px;padding:20px 15px}.checkBox[_ngcontent-%COMP%]{padding:0 0 0 20px;background:transparent}.checkBox[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding:3px 0 0;font-size:1.4rem!important;margin:0}.login_link[_ngcontent-%COMP%]{margin:5px 0;text-align:center;color:#002d3d}.item[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin:0 10px 0 0!important}.checkbox-icon[_ngcontent-%COMP%]{border-width:1px!important}.checkbox-checked[_ngcontent-%COMP%]{border-color:#002d3d!important;background-color:#fff!important;margin-right:10px}.margin_bottom[_ngcontent-%COMP%]{margin-bottom:10%}.fail[_ngcontent-%COMP%]{text-align:start!important;color:red!important;font-size:.9rem!important}.padding_015[_ngcontent-%COMP%]{padding:0 15px}.terms[_ngcontent-%COMP%]{text-decoration:underline;white-space:unset!important;text-transform:lowercase}.terms_conditions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.4rem!important;margin-top:5px}.canvas_background[_ngcontent-%COMP%]{text-align:center;background-color:#002d3d;color:#fff}.SecurePhrace_div[_ngcontent-%COMP%]{margin:auto}.secondLoginDiv[_ngcontent-%COMP%]{margin-top:32px}.margin-bottom[_ngcontent-%COMP%]{margin-bottom:50px}.securetooltip[_ngcontent-%COMP%]{position:absolute;margin-top:-38px;margin-left:75%}.secureTextDescr[_ngcontent-%COMP%]{display:block;width:93%;text-align:justify;margin:auto;font-size:1rem;font-family:Agenda-Regular}.UserimgDiv[_ngcontent-%COMP%]{margin-top:-10px}.border[_ngcontent-%COMP%]{border:1px solid #e0e0e0;margin-bottom:10px}.white_container_border_radius[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.7)!important;border-radius:15px!important;margin:15px}.flex[_ngcontent-%COMP%]{display:flex;align-items:center}.btn_center[_ngcontent-%COMP%]{text-transform:capitalize;--background: #002d3d !important;color:#fff;--border-radius: 10px !important;min-height:40px;width:100%!important;font-family:Agenda-Regular!important}@media only screen and (min-height: 600px) and (min-width: 768px){.securetooltip[_ngcontent-%COMP%]{position:absolute;margin-top:-38px;margin-left:38%}.secureDescripItem[_ngcontent-%COMP%]{padding-left:6%;width:85%;margin-top:0}.secureTextDescr[_ngcontent-%COMP%]{margin-top:0}}.content[_ngcontent-%COMP%]{display:contents}ion-input[_ngcontent-%COMP%]{font-size:.8rem!important;margin-left:20px!important;opacity:.8!important}.popover-arrow[_ngcontent-%COMP%]{--margin-left: 15px;display:block;position:fixed;width:20px;height:10px;margin-top:5px}"]}),n})()}];let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(y),p.Bz]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,g.u5,r.Pc,I,m.aw,g.UX]}),n})()}}]);